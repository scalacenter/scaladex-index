<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p><a href="http://mleap-docs.combust.ml" target="_blank"><img src="https://github.com/combust/mleap/raw/master/logo.png" alt="MLeap Logo" width="176" height="70" style="max-width:100%;"></a></p> 
  <p><a href="https://gitter.im/combust/mleap?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge" target="_blank"><img src="https://camo.githubusercontent.com/e1098e51ffabc245e518afa485317bf585ccac8b/68747470733a2f2f6261646765732e6769747465722e696d2f636f6d627573742f6d6c6561702e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/combust/mleap.svg" style="max-width:100%;"></a> <a href="https://travis-ci.org/combust/mleap" target="_blank"><img src="https://camo.githubusercontent.com/fe9fad30be881d85af311c6d6ece115e2da61f22/68747470733a2f2f7472617669732d63692e6f72672f636f6d627573742f6d6c6561702e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/combust/mleap.svg?branch=master" style="max-width:100%;"></a></p> 
  <p>Deploying machine learning data pipelines and algorithms should not be a time-consuming or difficult task. MLeap allows data scientists and engineers to deploy machine learning pipelines from Spark and Scikit-learn to a portable format and execution engine.</p> 
  <h2><a id="user-content-documentation" class="anchor" href="https://github.com/combust/mleap#documentation" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h2> 
  <p>Documentation is available at <a href="http://mleap-docs.combust.ml" target="_blank">mleap-docs.combust.ml</a>.</p> 
  <p>Read <a href="https://github.com/combust-ml/mleap/wiki/Serializing-a-Spark-ML-Pipeline-and-Scoring-with-MLeap" target="_blank">Serializing a Spark ML Pipeline and Scoring with MLeap</a> to gain a full sense of what is possible.</p> 
  <h2><a id="user-content-introduction" class="anchor" href="https://github.com/combust/mleap#introduction" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Introduction</h2> 
  <p>Using the MLeap execution engine and serialization format, we provide a performant, portable and easy-to-integrate production library for machine learning data pipelines and algorithms.</p> 
  <p>For portability, we build our software on the JVM and only use serialization formats that are widely-adopted.</p> 
  <p>We also provide a high level of integration with existing technologies.</p> 
  <p>Our goals for this project are:</p> 
  <ol> 
   <li>Allow Researchers/Data Scientists and Engineers to continue to build data pipelines and train algorithms with Spark and Scikit-Learn</li> 
   <li>Extend Spark/Scikit/TensorFlow by providing ML Pipelines serialization/deserialization to/from a common framework (Bundle.ML)</li> 
   <li>Use MLeap Runtime to execute your pipeline and algorithm without dependenices on Spark or Scikit (numpy, pandas, etc)</li> 
  </ol> 
  <h2><a id="user-content-overview" class="anchor" href="https://github.com/combust/mleap#overview" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Overview</h2> 
  <ol> 
   <li>Core execution engine implemented in Scala</li> 
   <li><a href="http://spark.apache.org/" target="_blank">Spark</a>, PySpark and Scikit-Learn support</li> 
   <li>Export a model with Scikit-learn or Spark and execute it on the MLeap engine anywhere in the JVM</li> 
   <li>Choose from 3 portable serialization formats (JSON, Protobuf, and Mixed)</li> 
   <li>Implement your own custom data types and transformers for use with MLeap data frames and transformer pipelines</li> 
   <li>extensive test coverage with full parity tests for Spark and MLeap pipelines</li> 
   <li>optional Spark transformer extension to extend Spark's default transformer offerings</li> 
  </ol> 
  <h2><a id="user-content-requirements" class="anchor" href="https://github.com/combust/mleap#requirements" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Requirements</h2> 
  <p>MLeap is cross-compiled for Scala 2.10 and 2.11. Because we depend heavily on Typesafe config for MLeap, we only support Java 8 at the moment. This means the following configurations should be possible:</p> 
  <ol start="2"> 
   <li>Scala 2.10 and Java 8</li> 
   <li>Scala 2.11 and Java 8</li> 
  </ol> 
  <h2><a id="user-content-setup" class="anchor" href="https://github.com/combust/mleap#setup" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setup</h2> 
  <h3><a id="user-content-link-with-maven-or-sbt" class="anchor" href="https://github.com/combust/mleap#link-with-maven-or-sbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Link with Maven or SBT</h3> 
  <p>MLeap is cross-compiled for Scala 2.10 and 2.11, so just replace 2.10 with 2.11 wherever you see it if you are running Scala version 2.11 and using a POM file for dependency management. Otherwise, use the <code>%%</code> operator if you are using SBT and the correct Scala version will be used.</p> 
  <h4><a id="user-content-sbt" class="anchor" href="https://github.com/combust/mleap#sbt" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT</h4> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ml.combust.mleap<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>mleap-runtime<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.5.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h4><a id="user-content-maven" class="anchor" href="https://github.com/combust/mleap#maven" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Maven</h4> 
  <pre lang="pom"><code>&lt;dependency&gt;
    &lt;groupId&gt;ml.combust.mleap&lt;/groupId&gt;
    &lt;artifactId&gt;mleap-runtime_2.10&lt;/artifactId&gt;
    &lt;version&gt;0.5.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> 
  <h3><a id="user-content-for-spark-integration" class="anchor" href="https://github.com/combust/mleap#for-spark-integration" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>For Spark Integration</h3> 
  <h4><a id="user-content-sbt-1" class="anchor" href="https://github.com/combust/mleap#sbt-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>SBT</h4> 
  <div class="highlight highlight-source-scala">
   <pre>libraryDependencies <span class="pl-k">+</span><span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>ml.combust.mleap<span class="pl-pds">"</span></span> <span class="pl-k">%%</span> <span class="pl-s"><span class="pl-pds">"</span>mleap-spark<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">"</span>0.5.0<span class="pl-pds">"</span></span></pre>
  </div> 
  <h4><a id="user-content-maven-1" class="anchor" href="https://github.com/combust/mleap#maven-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Maven</h4> 
  <pre lang="pom"><code>&lt;dependency&gt;
    &lt;groupId&gt;ml.combust.mleap&lt;/groupId&gt;
    &lt;artifactId&gt;mleap-spark_2.10&lt;/artifactId&gt;
    &lt;version&gt;0.5.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre> 
  <h3><a id="user-content-spark-packages" class="anchor" href="https://github.com/combust/mleap#spark-packages" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Spark Packages</h3> 
  <div class="highlight highlight-source-shell">
   <pre>$ bin/spark-shell --packages ml.combust.mleap:mleap-spark_2.11:0.5.0</pre>
  </div> 
  <h2><a id="user-content-using-the-library" class="anchor" href="https://github.com/combust/mleap#using-the-library" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using the Library</h2> 
  <p>For more complete examples, see our other Git repository: <a href="https://github.com/combust-ml/mleap-demo" target="_blank">MLeap Demos</a></p> 
  <h3><a id="user-content-create-and-export-a-spark-pipeline" class="anchor" href="https://github.com/combust/mleap#create-and-export-a-spark-pipeline" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create and Export a Spark Pipeline</h3> 
  <p>The first step is to create our pipeline in Spark. For our example we will manually build a simple Spark ML pipeline.</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">org.apache.spark.ml.feature.</span>{<span class="pl-v">StringIndexerModel</span>, <span class="pl-v">Binarizer</span>}

<span class="pl-c"><span class="pl-c">//</span> User out-of-the-box Spark transformers like you normally would</span>
<span class="pl-k">val</span> <span class="pl-en">stringIndexer</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">StringIndexerModel</span>(uid <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>si<span class="pl-pds">"</span></span>, labels <span class="pl-k">=</span> <span class="pl-en">Array</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>MLeap<span class="pl-pds">"</span></span>)).
  setInputCol(<span class="pl-s"><span class="pl-pds">"</span>test_string<span class="pl-pds">"</span></span>).
  setOutputCol(<span class="pl-s"><span class="pl-pds">"</span>test_index<span class="pl-pds">"</span></span>)

<span class="pl-k">val</span> <span class="pl-en">binarizer</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Binarizer</span>(uid <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>bin<span class="pl-pds">"</span></span>).
  setThreshold(<span class="pl-c1">0.5</span>).
  setInputCol(<span class="pl-s"><span class="pl-pds">"</span>test_double<span class="pl-pds">"</span></span>).
  setOutputCol(<span class="pl-s"><span class="pl-pds">"</span>test_bin<span class="pl-pds">"</span></span>)

<span class="pl-c"><span class="pl-c">//</span> Use the MLeap utility method to directly create an org.apache.spark.ml.PipelineModel</span>

<span class="pl-k">import</span> <span class="pl-v">org.apache.spark.ml.mleap.</span><span class="pl-v">SparkUtil</span>

<span class="pl-c"><span class="pl-c">//</span> Without needing to fit an org.apache.spark.ml.Pipeline</span>
<span class="pl-k">val</span> <span class="pl-en">pipeline</span> <span class="pl-k">=</span> <span class="pl-en">SparkUtil</span>.createPipelineModel(uid <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>pipeline<span class="pl-pds">"</span></span>, <span class="pl-en">Array</span>(stringIndexer, binarizer))

<span class="pl-k">import</span> <span class="pl-v">ml.combust.bundle.</span><span class="pl-v">BundleFile</span>
<span class="pl-k">import</span> <span class="pl-v">ml.combust.mleap.spark.SparkSupport.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">resource.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> Optionally yield from here to get the try back from serializing</span>
<span class="pl-c"><span class="pl-c">//</span> The try will indicate if serialization was successful</span>
<span class="pl-k">for</span>(modelFile <span class="pl-k">&lt;</span><span class="pl-k">-</span> managed(<span class="pl-en">BundleFile</span>(<span class="pl-s"><span class="pl-pds">"</span>jar:file:/tmp/simple-spark-pipeline.zip<span class="pl-pds">"</span></span>))) {
  pipeline.writeBundle.
    <span class="pl-c"><span class="pl-c">//</span> save our pipeline to a zip file</span>
    <span class="pl-c"><span class="pl-c">//</span> we can save a file to any supported java.nio.FileSystem</span>
    save(modelFile)
}</pre>
  </div> 
  <p>Spark pipelines are not meant to be run outside of Spark. They require a DataFrame and therefore a SparkContext to run. These are expensive data structures and libraries to include in a project. With MLeap, there is no dependency on Spark to execute a pipeline. MLeap dependencies are lightweight and we use fast data structures to execute your ML pipelines.</p> 
  <h3><a id="user-content-create-and-export-a-scikit-learn-pipeline" class="anchor" href="https://github.com/combust/mleap#create-and-export-a-scikit-learn-pipeline" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Create and Export a Scikit-Learn Pipeline</h3> 
  <div class="highlight highlight-source-python">
   <pre><span class="pl-c"><span class="pl-c">#</span> Load scikit-learn mleap extensions</span>
<span class="pl-k">import</span> mleap.sklearn.pipeline
<span class="pl-k">import</span> mleap.sklearn.preprocessing.data
<span class="pl-k">from</span> mleap.sklearn.preprocessing.data <span class="pl-k">import</span> NDArrayToDataFrame

<span class="pl-c"><span class="pl-c">#</span> Load scikit-learn transformers and models</span>
<span class="pl-k">from</span> sklearn.preprocessing <span class="pl-k">import</span> LabelEncoder, Binarizer

<span class="pl-c"><span class="pl-c">#</span> Define the Label Encoder (minit method adds a unique `name` to the transformer as well as explicit input/output features)</span>
label_encoder_tf <span class="pl-k">=</span> LabelEncoder()
label_encoder_tf.minit(<span class="pl-v">input_features</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>col_a<span class="pl-pds">'</span></span>, <span class="pl-v">output_features</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>col_a_label_le<span class="pl-pds">'</span></span>)

<span class="pl-c"><span class="pl-c">#</span> Convert output of Label Encoder to Data Frame instead of 1d-array</span>
n_dim_array_to_df_tf <span class="pl-k">=</span> NDArrayToDataFrame(label_encoder_tf.output_features)

<span class="pl-c"><span class="pl-c">#</span> Define our binarizer</span>
binarizer <span class="pl-k">=</span> Binarizer(<span class="pl-c1">0.5</span>)
binarizer.minit(<span class="pl-v">input_features</span><span class="pl-k">=</span>n_dim_array_to_df_tf.output_features, <span class="pl-v">output_features</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-c1">{}</span>_binarized<span class="pl-pds">"</span></span>.format(n_dim_array_to_df_tf.output_features))

data <span class="pl-k">=</span> pd.DataFrame([<span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>c<span class="pl-pds">'</span></span>], <span class="pl-v">columns</span><span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">'</span>col_a<span class="pl-pds">'</span></span>])

<span class="pl-c"><span class="pl-c">#</span> Assemble the steps of our pipeline</span>
steps <span class="pl-k">=</span> [
    (label_encoder_tf.name, label_encoder_tf),
    (n_dim_array_to_df_tf.name, n_dim_array_to_df_tf),
    (binarizer.name, binarizer)
]

pipeline <span class="pl-k">=</span> Pipeline(steps)
pipeline.minit()

<span class="pl-c"><span class="pl-c">#</span> Fit the pipeline</span>
pipeline.fit(data)

<span class="pl-c"><span class="pl-c">#</span> Write the pipeline to bundle.ml</span>
pipeline.serialize_to_bundle(<span class="pl-s"><span class="pl-pds">'</span>/tmp<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>simple-sk-pipeline<span class="pl-pds">'</span></span>, <span class="pl-v">init</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
</pre>
  </div> 
  <h3><a id="user-content-load-and-transform-using-mleap" class="anchor" href="https://github.com/combust/mleap#load-and-transform-using-mleap" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Load and Transform Using MLeap</h3> 
  <p>Becuase we export Spark and Scikit-learn pipelines to a standard format, we can use either our Spark-trained pipeline or our Scikit-learn pipeline from the previous steps to demonstrate usage of MLeap in this section. The choice is yours!</p> 
  <div class="highlight highlight-source-scala">
   <pre><span class="pl-k">import</span> <span class="pl-v">ml.combust.bundle.</span><span class="pl-v">BundleFile</span>
<span class="pl-k">import</span> <span class="pl-v">ml.combust.mleap.runtime.MleapSupport.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">resource.</span><span class="pl-v">_</span>

<span class="pl-c"><span class="pl-c">//</span> load the Spark pipeline we saved in the previous section</span>
<span class="pl-k">val</span> <span class="pl-en">bundle</span> <span class="pl-k">=</span> (<span class="pl-k">for</span>(bundleFile <span class="pl-k">&lt;</span><span class="pl-k">-</span> managed(<span class="pl-en">BundleFile</span>(<span class="pl-s"><span class="pl-pds">"</span>jar:file:/tmp/simple-spark-pipeline.zip<span class="pl-pds">"</span></span>))) <span class="pl-k">yield</span> {
  bundleFile.loadMleapBundle().get
}).opt.get

<span class="pl-c"><span class="pl-c">//</span> create a simple LeapFrame to transform</span>
<span class="pl-k">import</span> <span class="pl-v">ml.combust.mleap.runtime.</span>{<span class="pl-v">Row</span>, <span class="pl-v">LeapFrame</span>, <span class="pl-v">LocalDataset</span>}
<span class="pl-k">import</span> <span class="pl-v">ml.combust.mleap.runtime.types.</span><span class="pl-v">_</span>
<span class="pl-k">import</span> <span class="pl-v">ml.combust.mleap.tensor.</span><span class="pl-v">Tensor</span>


<span class="pl-c"><span class="pl-c">//</span> MLeap makes extensive use of monadic types like Try</span>
<span class="pl-k">val</span> <span class="pl-en">schema</span> <span class="pl-k">=</span> <span class="pl-en">StructType</span>(<span class="pl-en">StructField</span>(<span class="pl-s"><span class="pl-pds">"</span>test_string<span class="pl-pds">"</span></span>, <span class="pl-en">StringType</span>()),
  <span class="pl-en">StructField</span>(<span class="pl-s"><span class="pl-pds">"</span>test_double<span class="pl-pds">"</span></span>, <span class="pl-en">TensorType</span>(<span class="pl-en">DoubleType</span>()))).get
<span class="pl-k">val</span> <span class="pl-en">data</span> <span class="pl-k">=</span> <span class="pl-en">LocalDataset</span>(<span class="pl-en">Row</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>, <span class="pl-en">Tensor</span>.denseVector(<span class="pl-en">Array</span>(<span class="pl-c1">0.6</span>))),
  <span class="pl-en">Row</span>(<span class="pl-s"><span class="pl-pds">"</span>MLeap<span class="pl-pds">"</span></span>, <span class="pl-en">Tensor</span>.denseVector(<span class="pl-en">Array</span>(<span class="pl-c1">0.2</span>))))
<span class="pl-k">val</span> <span class="pl-en">frame</span> <span class="pl-k">=</span> <span class="pl-en">LeapFrame</span>(schema, data)

<span class="pl-c"><span class="pl-c">//</span> transform the dataframe using our pipeline</span>
<span class="pl-k">val</span> <span class="pl-en">mleapPipeline</span> <span class="pl-k">=</span> bundle.root
<span class="pl-k">val</span> <span class="pl-en">frame2</span> <span class="pl-k">=</span> mleapPipeline.transform(frame).get
<span class="pl-k">val</span> <span class="pl-en">data2</span> <span class="pl-k">=</span> frame2.dataset

<span class="pl-c"><span class="pl-c">//</span> get data from the transformed rows and make some assertions</span>
assert(data2(<span class="pl-c1">0</span>).getDouble(<span class="pl-c1">2</span>) <span class="pl-k">==</span> <span class="pl-c1">0.0</span>) <span class="pl-c"><span class="pl-c">//</span> string indexer output</span>
assert(data2(<span class="pl-c1">0</span>).getTensor[<span class="pl-k">Double</span>](<span class="pl-c1">3</span>).get(<span class="pl-c1">0</span>) <span class="pl-k">==</span> <span class="pl-c1">1.0</span>) <span class="pl-c"><span class="pl-c">//</span> binarizer output</span>

<span class="pl-c"><span class="pl-c">//</span> the second row</span>
assert(data2(<span class="pl-c1">1</span>).getDouble(<span class="pl-c1">2</span>) <span class="pl-k">==</span> <span class="pl-c1">1.0</span>)
assert(data2(<span class="pl-c1">1</span>).getTensor[<span class="pl-k">Double</span>](<span class="pl-c1">3</span>).get(<span class="pl-c1">0</span>) <span class="pl-k">==</span> <span class="pl-c1">0.0</span>)</pre>
  </div> 
  <h2><a id="user-content-documentation-1" class="anchor" href="https://github.com/combust/mleap#documentation-1" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Documentation</h2> 
  <p>For more documentation, please see our <a href="https://github.com/combust-ml/mleap/wiki" target="_blank">wiki</a>, where you can learn to:</p> 
  <ol> 
   <li>implement custom transformers that will work with Spark, MLeap and Scikit-learn</li> 
   <li>implement custom data types to transform with Spark and MLeap pipelines</li> 
   <li>transform with blazing fast speeds using optimized row-based transformers</li> 
   <li>serialize MLeap data frames to various formats like avro, json, and a custom binary format</li> 
   <li>implement new serialization formats for MLeap data frames</li> 
   <li>work through several demonstration pipelines which use real-world data to create predictive pipelines</li> 
   <li>supported Spark transformers</li> 
   <li>supported Scikit-learn transformers</li> 
   <li>custom transformers provided by MLeap</li> 
  </ol> 
  <h2><a id="user-content-contributing" class="anchor" href="https://github.com/combust/mleap#contributing" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contributing</h2> 
  <ul> 
   <li>Write documentation.</li> 
   <li>Write a tutorial/walkthrough for an interesting ML problem</li> 
   <li>Contribute an Estimator/Transformer from Spark</li> 
   <li>Use MLeap at your company and tell us what you think</li> 
   <li>Make a feature request or report a bug in github</li> 
   <li>Make a pull request for an existing feature request or bug report</li> 
   <li>Join the discussion of how to get MLeap into Spark as a dependency. Talk with us on Gitter (see link at top of README.md)</li> 
  </ul> 
  <h2><a id="user-content-contact-information" class="anchor" href="https://github.com/combust/mleap#contact-information" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Contact Information</h2> 
  <ul> 
   <li>Hollin Wilkins (<a href="mailto:hollin@combust.ml" target="_blank">hollin@combust.ml</a>)</li> 
   <li>Mikhail Semeniuk (<a href="mailto:mikhail@combust.ml" target="_blank">mikhail@combust.ml</a>)</li> 
   <li>Ram Sriharsha (<a href="mailto:ram@databricks.com" target="_blank">ram@databricks.com</a>)</li> 
  </ul> 
  <h2><a id="user-content-license" class="anchor" href="https://github.com/combust/mleap#license" aria-hidden="true" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>License</h2> 
  <p>See LICENSE and NOTICE file in this repository.</p> 
  <p>Copyright 2016 Combust, Inc.</p> 
  <p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p> 
  <p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a></p> 
  <p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p> 
 </article>
</div>
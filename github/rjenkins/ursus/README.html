<div class="announce instapaper_body md" data-path="README.md" id="readme">
 <article class="markdown-body entry-content" itemprop="text">
  <p>#Ursus</p> 
  <h1 id="user-content-overview"><a href="https://github.com/rjenkins/ursus#overview" aria-hidden="true" class="anchor" id="user-content-overview" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Overview</h1> 
  <p>Ursus is a <a href="http://dropwizard.codahale.com/" target="_blank">Dropwizard</a> inspired framework for developing lightweight web services and NIO applications on the JVM and <a href="https://grizzly.java.net/" target="_blank">Grizzly</a>. Ursus combines Grizzly's NIO/Event Driven framework and popular libraries such as <a href="https://jersey.java.net/" target="_blank">Jersey 2.7</a> and <a href="https://tyrus.java.net/" target="_blank">Project Tyrus - JSR 356: Java API for WebSocket - Reference Implementation</a> with the simple conventions found in Dropwizard, allowing you to focus on developing your services rather than managing their accompanying dependencies, reducing time-to-market and maintenance.</p> 
  <h2 id="user-content-grizzly"><a href="https://github.com/rjenkins/ursus#grizzly-http-container" aria-hidden="true" class="anchor" id="user-content-grizzly-http-container" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Grizzly HTTP Container</h2> 
  <p>Grizzly is a multi-protocol framework built on top of Java NIO. Grizzly aims to simplify development of robust and scalable servers. Jersey provides a container extension module that enables support for using Grizzly as a plain vanilla HTTP container that runs JAX-RS applications. Starting a Grizzly server to run a JAX-RS or Jersey application is one of the most lightweight and easy ways how to expose a functional RESTful services application.</p> 
  <h2 id="user-content-jersey"><a href="https://github.com/rjenkins/ursus#rest--jersey" aria-hidden="true" class="anchor" id="user-content-rest--jersey" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>REST / Jersey</h2> 
  <p>Jersey is an open source, production quality, framework for developing RESTful Web Services in Java that provides support for JAX-RS APIs and serves as a JAX-RS (JSR 311 &amp; JSR 339) Reference Implementation. Developing RESTful Web services with Jersey is a snap and the latest Jersey implementation included in Ursus provides support for both asynchronous clients and server side services with <a href="https://jax-rs-spec.java.net/nonav/2.0/apidocs/javax/ws/rs/container/AsyncResponse.html" target="_blank">AsyncResponse</a></p> 
  <h2 id="user-content-tyrus"><a href="https://github.com/rjenkins/ursus#websockets--tyrus" aria-hidden="true" class="anchor" id="user-content-websockets--tyrus" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>WebSockets / Tyrus</h2> 
  <p>Tyrus is the open source <a href="https://java.net/projects/websocket-spec" target="_blank">JSR 356</a> Java reference implementation of WebSockets. The WebSocket protocol provides full-duplex communications between server and remote hosts. WebSocket is designed to be implemented in web browsers and web servers, but it can be used by any client or server application. The WebSocket protocol makes possible more interaction between a browser and a web site, facilitating live content and the creation of real-time applications and services.</p> 
  <h2 id="user-content-additional libraries"><a href="https://github.com/rjenkins/ursus#additional-libraries" aria-hidden="true" class="anchor" id="user-content-additional-libraries" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Additional Libraries</h2> 
  <p>Ursus also includes many libraries found in Dropwizard and other frameworks to help speed up development including,</p> 
  <ul> 
   <li><a href="https://code.google.com/p/guava-libraries/" target="_blank">Guava</a></li> 
   <li><a href="https://github.com/rjenkins/ursus/blob/master/www.joda.org/joda-time/" target="_blank">Joda time</a></li> 
   <li><a href="http://hibernate.org/validator/" target="_blank">Hibernate Validator</a></li> 
   <li><a href="http://jackson.codehaus.org/" target="_blank">Jackson</a> for YAML and JSON support</li> 
   <li><a href="http://logback.qos.ch/" target="_blank">Logback</a> and <a href="http://www.slf4j.org/" target="_blank">SLF4J</a> for bridging of Grizzly's java.util.logging</li> 
   <li><a href="https://people.apache.org/%7Efhanik/jdbc-pool/jdbc-pool.html" target="_blank">Tomcat JDBC Connection Pool</a> for JDBC connection pooling.</li> 
   <li><a href="http://www.liquibase.org/" target="_blank">Liquibase</a> for Database refactoring.</li> 
   <li>An <a href="http://hc.apache.org/httpclient-3.x/" target="_blank">Apache HTTPClient</a> and a <a href="https://jersey.java.net/documentation/latest/user-guide.html#client" target="_blank">Jersey 2.7 client</a></li> 
  </ul> 
  <h2 id="user-content-using"><a href="https://github.com/rjenkins/ursus#using-ursus" aria-hidden="true" class="anchor" id="user-content-using-ursus" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Using Ursus</h2> Ursus releases artifacts are hosted on the central repository, to get started with Ursus simply add the ```ursus-core``` module to your pom.xml as a dependency. 
  <div class="highlight highlight-text-xml">
   <pre> &lt;<span class="pl-ent">dependencies</span>&gt;
    &lt;<span class="pl-ent">dependency</span>&gt;
        &lt;<span class="pl-ent">groupId</span>&gt;com.aceevo.ursus&lt;/<span class="pl-ent">groupId</span>&gt;
        &lt;<span class="pl-ent">artifactId</span>&gt;ursus-core&lt;/<span class="pl-ent">artifactId</span>&gt;
        &lt;<span class="pl-ent">version</span>&gt;0.2.15&lt;/<span class="pl-ent">version</span>&gt;
    &lt;/<span class="pl-ent">dependency</span>&gt;
 &lt;/<span class="pl-ent">dependencies</span>&gt;</pre>
  </div> 
  <h1 id="user-content-jersey quickstart"><a href="https://github.com/rjenkins/ursus#jersey-application-quick-start" aria-hidden="true" class="anchor" id="user-content-jersey-application-quick-start" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Jersey Application Quick Start</h1> Let's take a look at the ```ursus-example-application``` project a simple HelloWorld service. It's fully implemented, but we're going to walk through the steps it took to build this project. If it helps you might want to clone the Ursus repro, [
  <a href="https://github.com/rjenkins/ursus.git](https://github.com/rjenkins/ursus.git)" target="_blank">https://github.com/rjenkins/ursus.git](https://github.com/rjenkins/ursus.git)</a> and modify ```ursus-example-application``` as we progress through the quick start building up the application yourself. 
  <p>Ursus Jersey applications require 2 classes, a subclass of <code>UrsusJerseyApplication</code> and a subclass of <code>UrsusJerseyApplicationConfiguration</code>. The com.aceevo.ursus.example package contains both. Let's start by looking at the <code>ExampleApplicationConfiguration</code> class.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.config.UrsusJerseyApplicationConfiguration</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.fasterxml.jackson.annotation.JsonProperty</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.hibernate.validator.constraints.NotEmpty</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ExampleApplicationConfiguration</span> <span class="pl-k">extends</span> <span class="pl-e">UrsusJerseyApplicationConfiguration</span> {

    <span class="pl-k">@NotEmpty</span>
    <span class="pl-k">@JsonProperty</span>
    <span class="pl-k">private</span> <span class="pl-smi">String</span> name;

    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getName</span>() {
        <span class="pl-k">return</span> name;
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setName</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>) {
        <span class="pl-c1">this</span><span class="pl-k">.</span>name <span class="pl-k">=</span> name;
    }
}</pre>
  </div> 
  <p>Just like Dropwizard we will specify our environment specific configuration parameters in a <a href="http://www.yaml.org/" target="_blank">YAML</a> configuration file and these parameters will be deserialized by Jackson and validated. By default Ursus will look for a file whose name is the class name of your application with a <code>.yml</code> extension, for this example application that file is named <code>exampleapplication.yml</code>. If you wish to specify a different location for you configuration file you can pass that as a command line argument.</p> 
  <p><code>java -jar &lt;path to jar file&gt; server &lt;path to your YAML file&gt;</code></p> 
  <p>In addition to your own environment specific configuration parameters <a href="https://github.com/rjenkins/ursus/blob/master/ursus-config/src/main/java/com/aceevo/ursus/config/UrsusJerseyApplicationConfiguration.java" target="_blank">UrsusJerseyApplicationConfiguration</a> defines a large set of configuration properties that allow you to modify all of the granular configuration options available with Grizzly and many of the other included libraries simply by adding lines of YAML (more on that later).</p> 
  <h3 id="user-content-jersey creating yaml"><a href="https://github.com/rjenkins/ursus#creating-our-yaml-file" aria-hidden="true" class="anchor" id="user-content-creating-our-yaml-file" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating our YAML File</h3> 
  <p>Let's allow our ExampleApplication the ability to specify who it should say Hello to. For this we'll use the name property we created in <code>ExampleApplicationConfiguration</code>. Now we can define this parameter in <code>exampleapplication.yml</code></p> 
  <div class="highlight highlight-source-yaml">
   <pre><span class="pl-ent">httpServer</span>:
  <span class="pl-ent">host</span>: <span class="pl-s">localhost</span>
<span class="pl-ent">name</span>: <span class="pl-s">Ray</span></pre>
  </div> 
  <p>Great! Let's move on to creating our first application.</p> 
  <h3 id="user-content-creating ursusjerseyapplication"><a href="https://github.com/rjenkins/ursus#a-first-ursusjerseyapplication" aria-hidden="true" class="anchor" id="user-content-a-first-ursusjerseyapplication" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>A First UrsusJerseyApplication</h3> 
  <p>We'll name our application <code>ExampleApplication</code> and subclass <code>UrsusJerseyApplication</code> we also need to parameterize ExampleApplication with the type of our <code>UrsusJerseyApplicationConfiguration</code> class, that's named <code>ExampleApplicationConfiguration</code>. If you're using an IDE like IntelliJ you can select implement methods and you'll get the skeleton of our application. We also need to add a <code>public static void main(String[] args)</code> method and instantiate an instance of ExampleApplication.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.core.UrsusJerseyApplication</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.http.server.HttpServer</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ExampleApplication</span> <span class="pl-k">extends</span> <span class="pl-e">UrsusJerseyApplication&lt;<span class="pl-smi">ExampleApplicationConfiguration</span>&gt;</span> {

    <span class="pl-k">protected</span> <span class="pl-en">ExampleApplication</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-c1">super</span>(args);
    }

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {
        <span class="pl-k">new</span> <span class="pl-smi">ExampleApplication</span>(args);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">boostrap</span>(<span class="pl-smi">ExampleApplicationConfiguration</span> <span class="pl-v">exampleApplicationConfiguration</span>) {
        <span class="pl-c"><span class="pl-c">//</span>To change body of implemented methods use File | Settings | File Templates.</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">run</span>(<span class="pl-smi">HttpServer</span> <span class="pl-v">httpServer</span>) {
        <span class="pl-c"><span class="pl-c">//</span>To change body of implemented methods use File | Settings | File Templates.</span>
    }
}</pre>
  </div> 
  <p>ExampleApplication in the <code>ursus-example-application</code> project is filled out and has more data than this, but let's ignore that for now. If you like you can always overwrite <code>ExampleApplication</code> with the above and follow along.</p> 
  <h3 id="user-content-setting up logging"><a href="https://github.com/rjenkins/ursus#setting-up-logging" aria-hidden="true" class="anchor" id="user-content-setting-up-logging" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Setting up Logging</h3> 
  <p>Ursus includes <a href="http://logback.qos.ch/" target="_blank">Logback</a> for logging, we need to setup a <code>logback.xml</code> file for our project and because we're using maven we'll put this file in <code>src/main/resources</code>. Our logback.xml should include an appender named <code>FILE</code>.</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">configuration</span>&gt;
    &lt;<span class="pl-ent">appender</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>STDOUT<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>ch.qos.logback.core.ConsoleAppender<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">encoder</span>&gt;
            &lt;<span class="pl-ent">outputPatternAsHeader</span>&gt;false&lt;/<span class="pl-ent">outputPatternAsHeader</span>&gt;
            &lt;<span class="pl-ent">pattern</span>&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/<span class="pl-ent">pattern</span>&gt;
        &lt;/<span class="pl-ent">encoder</span>&gt;
    &lt;/<span class="pl-ent">appender</span>&gt;
    &lt;<span class="pl-ent">appender</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>FILE<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>ch.qos.logback.core.FileAppender<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">file</span>&gt;./ursus-example-application.log&lt;/<span class="pl-ent">file</span>&gt;
        &lt;<span class="pl-ent">encoder</span>&gt;
            &lt;<span class="pl-ent">outputPatternAsHeader</span>&gt;false&lt;/<span class="pl-ent">outputPatternAsHeader</span>&gt;
            &lt;<span class="pl-ent">pattern</span>&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/<span class="pl-ent">pattern</span>&gt;
        &lt;/<span class="pl-ent">encoder</span>&gt;
    &lt;/<span class="pl-ent">appender</span>&gt;
    &lt;<span class="pl-ent">root</span> <span class="pl-e">level</span>=<span class="pl-s"><span class="pl-pds">"</span>INFO<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">appender-ref</span> <span class="pl-e">ref</span>=<span class="pl-s"><span class="pl-pds">"</span>FILE<span class="pl-pds">"</span></span> /&gt;
        &lt;<span class="pl-ent">appender-ref</span> <span class="pl-e">ref</span>=<span class="pl-s"><span class="pl-pds">"</span>STDOUT<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">root</span>&gt;
    &lt;<span class="pl-ent">contextListener</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>ch.qos.logback.classic.jul.LevelChangePropagator<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">resetJUL</span>&gt;true&lt;/<span class="pl-ent">resetJUL</span>&gt;
    &lt;/<span class="pl-ent">contextListener</span>&gt;
&lt;/<span class="pl-ent">configuration</span>&gt;</pre>
  </div> 
  <p>Now we can override logging parameters like level and fileName in our exampleapplication.yml</p> 
  <div class="highlight highlight-source-yaml">
   <pre><span class="pl-ent">httpServer</span>:
  <span class="pl-ent">host</span>: <span class="pl-s">localhost</span>
<span class="pl-ent">logging</span>:
  <span class="pl-ent">level</span>: <span class="pl-s">INFO</span>
  <span class="pl-ent">fileName</span>: <span class="pl-s">ray.out</span>
<span class="pl-ent">name</span>: <span class="pl-s">Ray</span></pre>
  </div> 
  <h3 id="user-content-building first artifact"><a href="https://github.com/rjenkins/ursus#building-our-first-artifact" aria-hidden="true" class="anchor" id="user-content-building-our-first-artifact" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Building our First Artifact.</h3> 
  <p>Like Dropwizard Ursus recommends building a "fat" jar that contains all the <code>.class</code> files needed to run our service. Here's the relevant parts of our configuration.</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">build</span>&gt;
    &lt;<span class="pl-ent">plugins</span>&gt;
        &lt;<span class="pl-ent">plugin</span>&gt;
            &lt;<span class="pl-ent">groupId</span>&gt;org.apache.maven.plugins&lt;/<span class="pl-ent">groupId</span>&gt;
            &lt;<span class="pl-ent">artifactId</span>&gt;maven-shade-plugin&lt;/<span class="pl-ent">artifactId</span>&gt;
            &lt;<span class="pl-ent">version</span>&gt;2.1&lt;/<span class="pl-ent">version</span>&gt;
            &lt;<span class="pl-ent">configuration</span>&gt;
                &lt;<span class="pl-ent">createDependencyReducedPom</span>&gt;true&lt;/<span class="pl-ent">createDependencyReducedPom</span>&gt;
                &lt;<span class="pl-ent">filters</span>&gt;
                    &lt;<span class="pl-ent">filter</span>&gt;
                        &lt;<span class="pl-ent">artifact</span>&gt;*:*&lt;/<span class="pl-ent">artifact</span>&gt;
                        &lt;<span class="pl-ent">excludes</span>&gt;
                            &lt;<span class="pl-ent">exclude</span>&gt;META-INF/*.SF&lt;/<span class="pl-ent">exclude</span>&gt;
                            &lt;<span class="pl-ent">exclude</span>&gt;META-INF/*.DSA&lt;/<span class="pl-ent">exclude</span>&gt;
                            &lt;<span class="pl-ent">exclude</span>&gt;META-INF/*.RSA&lt;/<span class="pl-ent">exclude</span>&gt;
                        &lt;/<span class="pl-ent">excludes</span>&gt;
                    &lt;/<span class="pl-ent">filter</span>&gt;
                &lt;/<span class="pl-ent">filters</span>&gt;
            &lt;/<span class="pl-ent">configuration</span>&gt;
            &lt;<span class="pl-ent">executions</span>&gt;
                &lt;<span class="pl-ent">execution</span>&gt;
                    &lt;<span class="pl-ent">phase</span>&gt;package&lt;/<span class="pl-ent">phase</span>&gt;
                    &lt;<span class="pl-ent">goals</span>&gt;
                        &lt;<span class="pl-ent">goal</span>&gt;shade&lt;/<span class="pl-ent">goal</span>&gt;
                    &lt;/<span class="pl-ent">goals</span>&gt;
                    &lt;<span class="pl-ent">configuration</span>&gt;
                        &lt;<span class="pl-ent">transformers</span>&gt;
                            &lt;<span class="pl-ent">transformer</span> <span class="pl-e">implementation</span>=<span class="pl-s"><span class="pl-pds">"</span>org.apache.maven.plugins.shade.resource.ServicesResourceTransformer<span class="pl-pds">"</span></span> /&gt;
                            &lt;<span class="pl-ent">transformer</span> <span class="pl-e">implementation</span>=<span class="pl-s"><span class="pl-pds">"</span>org.apache.maven.plugins.shade.resource.ManifestResourceTransformer<span class="pl-pds">"</span></span>&gt;
                                &lt;<span class="pl-ent">mainClass</span>&gt;com.aceevo.ursus.example.ExampleApplication&lt;/<span class="pl-ent">mainClass</span>&gt;
                            &lt;/<span class="pl-ent">transformer</span>&gt;
                        &lt;/<span class="pl-ent">transformers</span>&gt;
                    &lt;/<span class="pl-ent">configuration</span>&gt;
                &lt;/<span class="pl-ent">execution</span>&gt;
            &lt;/<span class="pl-ent">executions</span>&gt;
        &lt;/<span class="pl-ent">plugin</span>&gt;
            ...</pre>
  </div> 
  <p>If you've cloned the ursus git repo and have modified the <code>ursus-example-application</code> you should be able to build and test the project by running <code>mvn -q clean compile -P run-ursus-example-application</code> from the ursus directory.</p> 
  <p>Unfortunately our application starts and then quickly exits, what's up?</p> 
  <pre><code>$ mvn -q compile -P run-ursus-example-application
19:16:17.488 [main] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 5.0.1.Final
19:16:18.009 [main] INFO  o.g.jersey.server.ApplicationHandler - Initiating Jersey application, version Jersey: 2.5 2013-12-18 14:27:29...
$
</code></pre> 
  <h3 id="user-content-starting http"><a href="https://github.com/rjenkins/ursus#starting-the-httpserver" aria-hidden="true" class="anchor" id="user-content-starting-the-httpserver" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Starting the HttpServer</h3> 
  <p>We need to start our HttpServer instance to run our application. <code>protected void run(HttpServer httpServer)</code> method passes us a configured HttpServer (after bootstrap has been called) allowing us to make any additional modifications to the Grizzly Http Server before we start our application. When we're ready to start our application Ursus provides a helper method <code>protected void startWithShutdownHook(final HttpServer httpServer)</code> that handles starting the HttpServer and registering a shutdown hook for our application.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-c"><span class="pl-c">/*</span>*</span>
<span class="pl-c"> * Convenience method for starting this Grizzly HttpServer</span>
<span class="pl-c"> *</span>
<span class="pl-c"> * @param httpServer</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">protected</span> <span class="pl-k">void</span> startWithShutdownHook(<span class="pl-k">final</span> <span class="pl-smi">HttpServer</span> httpServer) {

    <span class="pl-smi">Runtime</span><span class="pl-k">.</span>getRuntime()<span class="pl-k">.</span>addShutdownHook(<span class="pl-k">new</span> <span class="pl-smi">Thread</span>(<span class="pl-k">new</span> <span class="pl-smi">Runnable</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>() {
            <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Stopping Grizzly HttpServer...<span class="pl-pds">"</span></span>);
            httpServer<span class="pl-k">.</span>stop();
            <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Stopping all managed services...<span class="pl-pds">"</span></span>);
            <span class="pl-k">for</span> (<span class="pl-smi">Service</span> service <span class="pl-k">:</span> managedServices) {
                service<span class="pl-k">.</span>stopAsync();
            }
        }
    }, <span class="pl-s"><span class="pl-pds">"</span>shutdownHook<span class="pl-pds">"</span></span>));

    <span class="pl-k">try</span> {
        <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Starting all managed services...<span class="pl-pds">"</span></span>);
        <span class="pl-k">for</span> (<span class="pl-smi">Service</span> service <span class="pl-k">:</span> managedServices) {
            service<span class="pl-k">.</span>startAsync();
        }
        httpServer<span class="pl-k">.</span>start();
        printBanner(getClass()<span class="pl-k">.</span>getSimpleName());
        <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Press CTRL^C to exit..<span class="pl-pds">"</span></span>);
        <span class="pl-smi">Thread</span><span class="pl-k">.</span>currentThread()<span class="pl-k">.</span>join();
    } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {
        <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>error(<span class="pl-s"><span class="pl-pds">"</span>There was an error while starting Grizzly HTTP server.<span class="pl-pds">"</span></span>, e);
    }
}</pre>
  </div> 
  <p>Let's add that to our ExampleApplication run method, build again and retry.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-c1">...</span>

<span class="pl-k">@Override</span>
<span class="pl-k">protected</span> <span class="pl-k">void</span> run(<span class="pl-smi">HttpServer</span> httpServer) {
    startWithShutdownHook(httpServer);
}

<span class="pl-c1">...</span></pre>
  </div> 
  <pre><code>$ mvn -q compile -P run-ursus-example-application
19:32:04.643 [main] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 5.0.1.Final
19:32:05.150 [main] INFO  o.g.jersey.server.ApplicationHandler - Initiating Jersey application, version Jersey: 2.5 2013-12-18 14:27:29...
19:32:05.504 [main] INFO  c.aceevo.ursus.core.UrsusJerseyApplication - Starting all managed services...
19:32:05.557 [main] INFO  o.g.g.http.server.NetworkListener - Started listener bound to [localhost:8080]
19:32:05.561 [main] INFO  o.g.grizzly.http.server.HttpServer - [HttpServer] Started.
19:32:05.570 [main] INFO  c.aceevo.ursus.core.UrsusJerseyApplication - Starting ExampleApplication
 __  __   ______    ______   __  __   ______
/_/\/_/\ /_____/\  /_____/\ /_/\/_/\ /_____/\
\:\ \:\ \\:::_ \ \ \::::_\/_\:\ \:\ \\::::_\/_
 \:\ \:\ \\:(_) ) )_\:\/___/\\:\ \:\ \\:\/___/\
  \:\ \:\ \\: __ `\ \\_::._\:\\:\ \:\ \\_::._\:\
   \:\_\:\ \\ \ `\ \ \ /____\:\\:\_\:\ \ /____\:\
    \_____\/ \_\/ \_\/ \_____\/ \_____\/ \_____\/

19:32:05.570 [main] INFO  c.aceevo.ursus.core.UrsusJerseyApplication - Press CTRL^C to exit..
</code></pre> 
  <p>Success! Now it's time to move on to implementing our service.</p> 
  <h3 id="user-content-representations and resources"><a href="https://github.com/rjenkins/ursus#representations-and-resources" aria-hidden="true" class="anchor" id="user-content-representations-and-resources" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Representations and Resources</h3> We've got our application started but we need to provide some resources and some representations. As previously mentioned this Hello World application is going to support specifying exactly who we're going to say hello to. Let's create a model class to represent a Hello. 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example.model</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.codehaus.jackson.annotate.JsonProperty</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Hello</span> {

    <span class="pl-k">@JsonProperty</span>
    <span class="pl-k">private</span> <span class="pl-smi">String</span> name;

    <span class="pl-k">public</span> <span class="pl-en">Hello</span>() {

    }

    <span class="pl-k">public</span> <span class="pl-en">Hello</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>) {
        <span class="pl-c1">this</span><span class="pl-k">.</span>name <span class="pl-k">=</span> name;
    }

    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getName</span>() {
        <span class="pl-k">return</span> name;
    }

    <span class="pl-k">void</span> <span class="pl-en">setName</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>) {
        <span class="pl-c1">this</span><span class="pl-k">.</span>name <span class="pl-k">=</span> name;
    }
}</pre>
  </div> 
  <p>Now that we've created a representation we can create a Jersey Resource class for serving this representation.</p> 
  <h3 id="user-content-creating resources"><a href="https://github.com/rjenkins/ursus#creating-resources" aria-hidden="true" class="anchor" id="user-content-creating-resources" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating Resources</h3> 
  <p>Let's create a simple Jersey resource that serves our Hello representation. In this Resource we'll add support for the <a href="http://tools.ietf.org/search/rfc2616#section-9.3" target="_blank">GET</a> and <a href="http://tools.ietf.org/search/rfc2616#section-9.5" target="_blank">POST</a> methods as well as support for an <a href="https://jersey.java.net/apidocs/latest/jersey/javax/ws/rs/container/AsyncResponse.html" target="_blank">AsyncResponse</a> GET.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example.api</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.example.ExampleApplicationConfiguration</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.example.model.Hello</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.inject.Inject</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.validation.Valid</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.GET</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.POST</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.Path</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.Produces</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.container.AsyncResponse</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.container.Suspended</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.core.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.net.URI</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ExecutorService</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.Executors</span>;

<span class="pl-k">@Path</span>(<span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>)
<span class="pl-k">@Produces</span>(<span class="pl-smi">MediaType</span><span class="pl-c1"><span class="pl-k">.</span>APPLICATION_JSON</span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">HelloWorldResource</span> {

    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">ExecutorService</span> executorService <span class="pl-k">=</span> <span class="pl-smi">Executors</span><span class="pl-k">.</span>newSingleThreadExecutor();

    <span class="pl-k">@Inject</span>
    <span class="pl-smi">ExampleApplicationConfiguration</span> exampleApplicationConfiguration;

    <span class="pl-k">@GET</span>
    <span class="pl-k">@Produces</span>(<span class="pl-smi">MediaType</span><span class="pl-c1"><span class="pl-k">.</span>APPLICATION_JSON</span>)
    <span class="pl-k">public</span> <span class="pl-smi">Response</span> <span class="pl-en">hello</span>() {
        <span class="pl-k">return</span> <span class="pl-smi">Response</span><span class="pl-k">.</span>ok(<span class="pl-k">new</span> <span class="pl-smi">Hello</span>(exampleApplicationConfiguration<span class="pl-k">.</span>getName()))<span class="pl-k">.</span>build();
    }

    <span class="pl-k">@POST</span>
    <span class="pl-k">@Produces</span>(<span class="pl-smi">MediaType</span><span class="pl-c1"><span class="pl-k">.</span>APPLICATION_JSON</span>)
    <span class="pl-k">public</span> <span class="pl-smi">Response</span> <span class="pl-en">createHello</span>(<span class="pl-k">@Valid</span> <span class="pl-smi">Hello</span> <span class="pl-v">hello</span>, <span class="pl-k">@Context</span> <span class="pl-smi">UriInfo</span> <span class="pl-v">uriInfo</span>) {
        <span class="pl-smi">URI</span> uri <span class="pl-k">=</span> <span class="pl-smi">UriBuilder</span><span class="pl-k">.</span>fromUri(uriInfo<span class="pl-k">.</span>getRequestUri())<span class="pl-k">.</span>path(hello<span class="pl-k">.</span>getName())<span class="pl-k">.</span>build();
        <span class="pl-k">return</span> <span class="pl-smi">Response</span><span class="pl-k">.</span>created(uri)<span class="pl-k">.</span>build();
    }

    <span class="pl-k">@GET</span>
    <span class="pl-k">@Path</span>(<span class="pl-s"><span class="pl-pds">"</span>/async<span class="pl-pds">"</span></span>)
    <span class="pl-k">@Produces</span>(<span class="pl-smi">MediaType</span><span class="pl-c1"><span class="pl-k">.</span>APPLICATION_JSON</span>)
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">sayHelloAsync</span>(<span class="pl-k">final</span> <span class="pl-k">@Suspended</span> <span class="pl-smi">AsyncResponse</span> <span class="pl-v">asyncResponse</span>) <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {

        executorService<span class="pl-k">.</span>submit(<span class="pl-k">new</span> <span class="pl-smi">Runnable</span>() {
            <span class="pl-k">@Override</span>
            <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>() {
                <span class="pl-k">try</span> {
                    <span class="pl-smi">Thread</span><span class="pl-k">.</span>currentThread()<span class="pl-k">.</span>sleep(<span class="pl-c1">5000</span>);
                    asyncResponse<span class="pl-k">.</span>resume(<span class="pl-smi">Response</span><span class="pl-k">.</span>ok(<span class="pl-k">new</span> <span class="pl-smi">Hello</span>(exampleApplicationConfiguration<span class="pl-k">.</span>getName()))<span class="pl-k">.</span>build());
                } <span class="pl-k">catch</span> (<span class="pl-smi">InterruptedException</span> e) {
                    e<span class="pl-k">.</span>printStackTrace();  <span class="pl-c"><span class="pl-c">//</span>To change body of catch statement use File | Settings | File Templates.</span>
                }
            }
        });

    }
}</pre>
  </div> 
  <p>There's a few things going on in this resource, so let's walk through them step by step.</p> 
  <ul> 
   <li>We define the path and media type at the class level with <code>@Path("hello") and @Produces(MediaType.APPLICATION_JSON)</code></li> 
   <li>We create an ExecutorService for our AsyncResponse resource with <code>java private final ExecutorService executorService = Executors.newSingleThreadExecutor();</code></li> 
   <li>We @Inject an instance of <code>ExampleApplicationConfiguration</code></li> 
  </ul> 
  <p>The first <code>@GET</code> and <code>@POST</code> methods are pretty standard, let's take a look at the <code>@PATH("/async") sayHelloAsync</code> resource method. This method uses the <code>@Suspend</code> annotation and allows us to suspend the current request releasing the thread responsible for handling the request and resume asynchronously once we're ready to response.</p> 
  <h3 id="user-content-registering resources"><a href="https://github.com/rjenkins/ursus#registering-resources" aria-hidden="true" class="anchor" id="user-content-registering-resources" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Registering Resources</h3> 
  <p>Now that we've created our first resource we need to register them with our Jersey ResourceConfig, there are many ways to do this (more on this later, you can also register an instance of a Resource class with <code>register(Object components)</code>). For our example application let's use Jersey's built-in resource discovery and specify the package where our resources exist. We'll do this in the bootstrap method of <code>ExampleApplication</code>.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.core.UrsusJerseyApplication</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.example.api.EchoEndpointResource</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.ImmutableMap</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.google.common.collect.Maps</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.http.server.HttpServer</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.websocket.server.ServerEndpointConfig</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ExampleApplication</span> <span class="pl-k">extends</span> <span class="pl-e">UrsusJerseyApplication&lt;<span class="pl-smi">ExampleApplicationConfiguration</span>&gt;</span> {

    <span class="pl-c1">...</span>

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">boostrap</span>(<span class="pl-smi">ExampleApplicationConfiguration</span> <span class="pl-v">exampleApplicationConfiguration</span>) {
        packages(<span class="pl-s"><span class="pl-pds">"</span>com.aceevo.ursus.example.api<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">run</span>(<span class="pl-smi">HttpServer</span> <span class="pl-v">httpServer</span>) {
        startWithShutdownHook(httpServer);
    }
}</pre>
  </div> 
  <p>Now we're ready to build and try out our resources.</p> 
  <pre><code>$ mvn -q compile -P run-ursus-example-application
21:27:58.901 [main] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 5.0.1.Final
21:27:59.901 [main] INFO  o.g.jersey.server.ApplicationHandler - Initiating Jersey application, version Jersey: 2.5 2013-12-18 14:27:29...
21:28:00.290 [main] INFO  c.aceevo.ursus.core.UrsusJerseyApplication - Starting all managed services...
21:28:00.342 [main] INFO  o.g.g.http.server.NetworkListener - Started listener bound to [localhost:8080]
21:28:00.357 [main] INFO  o.g.grizzly.http.server.HttpServer - [HttpServer] Started.
21:28:00.366 [main] INFO  c.aceevo.ursus.core.UrsusJerseyApplication - Starting ExampleApplication
 __  __   ______    ______   __  __   ______
/_/\/_/\ /_____/\  /_____/\ /_/\/_/\ /_____/\
\:\ \:\ \\:::_ \ \ \::::_\/_\:\ \:\ \\::::_\/_
 \:\ \:\ \\:(_) ) )_\:\/___/\\:\ \:\ \\:\/___/\
  \:\ \:\ \\: __ `\ \\_::._\:\\:\ \:\ \\_::._\:\
   \:\_\:\ \\ \ `\ \ \ /____\:\\:\_\:\ \ /____\:\
    \_____\/ \_\/ \_\/ \_____\/ \_____\/ \_____\/

21:28:00.366 [main] INFO  c.aceevo.ursus.core.UrsusJerseyApplication - Press CTRL^C to exit..
^Z
[1]+  Stopped                 mvn -q compile -P run-ursus-example-application
$ bg
[1]+ mvn -q compile -P run-ursus-example-application &amp;
</code></pre> 
  <pre><code>$ curl -v -X GET -H "Accept: application/json" http://localhost:8080/hello
* About to connect() to localhost port 8080 (#0)
*   Trying ::1...
* Connection refused
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 8080 (#0)
&gt; GET /hello HTTP/1.1
&gt; User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8y zlib/1.2.5
&gt; Host: localhost:8080
&gt; Accept: application/json
&gt;
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
&lt; Date: Thu, 16 Jan 2014 05:28:07 GMT
&lt; Content-Length: 14
&lt;
* Connection #0 to host localhost left intact
{"name":"Ray"}* Closing connection #0
</code></pre> 
  <pre><code>$ curl -v -H "Content-Type: application/json" -X POST http://localhost:8080/hello -d '{ "name" : "Andrea" }'
* About to connect() to localhost port 8080 (#0)
*   Trying ::1...
* Connection refused
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 8080 (#0)
&gt; POST /hello HTTP/1.1
&gt; User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8y zlib/1.2.5
&gt; Host: localhost:8080
&gt; Accept: */*
&gt; Content-Type: application/json
&gt; Content-Length: 21
&gt;
* upload completely sent off: 21 out of 21 bytes
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/hello/Andrea
&lt; Date: Thu, 16 Jan 2014 05:28:11 GMT
&lt; Content-Length: 0
&lt;
* Connection #0 to host localhost left intact
* Closing connection #0
</code></pre> 
  <pre><code>$ curl -v -X GET -H "Accept: application/json" http://localhost:8080/hello/async
* About to connect() to localhost port 8080 (#0)
*   Trying ::1...
* Connection refused
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 8080 (#0)
&gt; GET /hello/async HTTP/1.1
&gt; User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8y zlib/1.2.5
&gt; Host: localhost:8080
&gt; Accept: application/json
&gt;
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
&lt; Date: Thu, 16 Jan 2014 05:28:53 GMT
&lt; Content-Length: 14
&lt;
* Connection #0 to host localhost left intact
{"name":"Ray"}* Closing connection #0
</code></pre> 
  <p>Ursus supports full content negotiation via Jersey, so if your resource class produces <code>application/json</code> but the client accepts <code>text/plain</code>, Jersey will reply with a <code>406 Not Acceptable</code>.</p> 
  <pre><code>$ curl -v -H "Accept: text/plain" -X GET http://localhost:8080/hello
* About to connect() to localhost port 8080 (#0)
*   Trying ::1...
* Connection refused
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 8080 (#0)
&gt; GET /hello HTTP/1.1
&gt; User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8y zlib/1.2.5
&gt; Host: localhost:8080
&gt; Accept: vext/plain
&gt;
&lt; HTTP/1.1 406 Not Acceptable
&lt; Content-Type: text/plain
&lt; Date: Thu, 16 Jan 2014 07:56:36 GMT
&lt; Content-Length: 2122
&lt;
javax.ws.rs.NotAcceptableException: HTTP 406 Not Acceptable
	at org.glassfish.jersey.server.internal.routing.MethodSelectingRouter.getMethodRouter(MethodSelectingRouter.java:573)
	at org.glassfish.jersey.server.internal.routing.MethodSelectingRouter.access$400(MethodSelectingRouter.java:97)
	at org.glassfish.jersey.server.internal.routing.MethodSelectingRouter$4.apply(MethodSelectingRouter.java:813)
	at org.glassfish.jersey.server.internal.routing.MethodSelectingRouter.apply(MethodSelectingRouter.java:420)
	at org.glassfish.jersey.server.internal.routing.RoutingStage._apply(RoutingStage.java:128)
	at org.glassfish.jersey.server.internal.routing.RoutingStage._apply(RoutingStage.java:131)
	at org.glassfish.jersey.server.internal.routing.RoutingStage._apply(RoutingStage.java:131)
	at org.glassfish.jersey.server.internal.routing.RoutingStage.apply(RoutingStage.java:110)
	at org.glassfish.jersey.server.internal.routing.RoutingStage.apply(RoutingStage.java:65)
	at org.glassfish.jersey.process.internal.Stages.process(Stages.java:197)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:250)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:315)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:297)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:267)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:318)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:236)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1010)
	at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.service(GrizzlyHttpContainer.java:363)
	at org.glassfish.grizzly.http.server.HttpHandler$1.run(HttpHandler.java:217)
	at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:565)
	at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:545)
	at java.lang.Thread.run(Thread.java:744)
* Connection #0 to host localhost left intact
* Closing connection #0
</code></pre> 
  <h3 id="user-content-resource tests"><a href="https://github.com/rjenkins/ursus#writing-resource-tests" aria-hidden="true" class="anchor" id="user-content-writing-resource-tests" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing Resource Tests</h3> 
  <p>Jersey comes with a testframework provider for Grizzly, let's add that to our pom.xml so we can write some tests.</p> 
  <div class="highlight highlight-text-xml">
   <pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.glassfish.jersey.test-framework.providers&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;jersey-test-framework-provider-grizzly2&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;2.5&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;
&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.glassfish.jersey.test-framework&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;jersey-test-framework-core&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;2.5&lt;/<span class="pl-ent">version</span>&gt;
    &lt;<span class="pl-ent">exclusions</span>&gt;
        &lt;<span class="pl-ent">exclusion</span>&gt;
            &lt;<span class="pl-ent">groupId</span>&gt;com.google.guava&lt;/<span class="pl-ent">groupId</span>&gt;
            &lt;<span class="pl-ent">artifactId</span>&gt;guava&lt;/<span class="pl-ent">artifactId</span>&gt;
        &lt;/<span class="pl-ent">exclusion</span>&gt;
    &lt;/<span class="pl-ent">exclusions</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre>
  </div> 
  <p>We can extend JerseyTest and override the configure method to create a new <a href="https://jersey.java.net/documentation/latest/test-framework.html" target="_blank">Jersey test environment</a>. We'll create a dummy <code>ExampleApplicationConfiguration</code> class and register an UrsusApplicationBinder to support injection of our configuration as well as register our HelloWordResource class.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example.api</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.core.UrsusApplicationBinder</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.example.ExampleApplicationConfiguration</span>;
<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.example.model.Hello</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.jersey.server.ResourceConfig</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.jersey.test.JerseyTest</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.junit.Test</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.client.Entity</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.core.Application</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.core.MediaType</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.ws.rs.core.Response</span>;

<span class="pl-k">import static</span> <span class="pl-smi">junit.framework.Assert.assertEquals</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">HelloWorldTest</span> <span class="pl-k">extends</span> <span class="pl-e">JerseyTest</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-smi">Application</span> <span class="pl-en">configure</span>() {
        <span class="pl-smi">ResourceConfig</span> resourceConfig <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ResourceConfig</span>();
        <span class="pl-smi">ExampleApplicationConfiguration</span> exampleApplicationConfiguration <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ExampleApplicationConfiguration</span>();
        exampleApplicationConfiguration<span class="pl-k">.</span>setName(<span class="pl-s"><span class="pl-pds">"</span>Ray<span class="pl-pds">"</span></span>);
        resourceConfig<span class="pl-k">.</span>registerInstances(<span class="pl-k">new</span> <span class="pl-smi">UrsusApplicationBinder</span>(exampleApplicationConfiguration));
        resourceConfig<span class="pl-k">.</span>register(<span class="pl-smi">HelloWorldResource</span><span class="pl-k">.</span>class);
        <span class="pl-k">return</span> resourceConfig;
    }

    <span class="pl-k">@Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">helloTest</span>() {
        <span class="pl-smi">Response</span> response <span class="pl-k">=</span>  target(<span class="pl-s"><span class="pl-pds">"</span>/hello<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>request()<span class="pl-k">.</span>get();
        assertEquals(<span class="pl-c1">200</span>, response<span class="pl-k">.</span>getStatus());
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>Ray<span class="pl-pds">"</span></span>, response<span class="pl-k">.</span>readEntity(<span class="pl-smi">Hello</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>getName());
    }

    <span class="pl-k">@Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">sayHello</span>() {
        <span class="pl-k">Entity&lt;<span class="pl-smi">Hello</span>&gt;</span> helloEntity <span class="pl-k">=</span> <span class="pl-smi">Entity</span><span class="pl-k">.</span>entity(<span class="pl-k">new</span> <span class="pl-smi">Hello</span>(<span class="pl-s"><span class="pl-pds">"</span>Bob<span class="pl-pds">"</span></span>), <span class="pl-smi">MediaType</span><span class="pl-c1"><span class="pl-k">.</span>APPLICATION_JSON_TYPE</span>);
        <span class="pl-smi">Response</span> response <span class="pl-k">=</span> target(<span class="pl-s"><span class="pl-pds">"</span>/hello<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>request()<span class="pl-k">.</span>post(helloEntity);
        assertEquals(<span class="pl-c1">201</span>, response<span class="pl-k">.</span>getStatus());
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>http://localhost:9998/hello/Bob<span class="pl-pds">"</span></span>, response<span class="pl-k">.</span>getLocation()<span class="pl-k">.</span>toString());
    }

    <span class="pl-k">@Test</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">helloAsyncTest</span>() <span class="pl-k">throws</span> <span class="pl-smi">Exception</span> {
        <span class="pl-smi">Response</span> response <span class="pl-k">=</span> target(<span class="pl-s"><span class="pl-pds">"</span>/hello<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>request()<span class="pl-k">.</span>async()<span class="pl-k">.</span>get()<span class="pl-k">.</span>get();
        assertEquals(<span class="pl-c1">200</span>, response<span class="pl-k">.</span>getStatus());
        assertEquals(<span class="pl-s"><span class="pl-pds">"</span>Ray<span class="pl-pds">"</span></span>, response<span class="pl-k">.</span>readEntity(<span class="pl-smi">Hello</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>getName());
    }
}</pre>
  </div> 
  <p>Now let's run <code>mvn test</code> and verify our resource class works as intended</p> 
  <pre><code>-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.aceevo.ursus.example.api.HelloWorldTest
Jan 19, 2014 8:36:39 PM org.glassfish.jersey.server.ApplicationHandler initialize
INFO: Initiating Jersey application, version Jersey: 2.5 2013-12-18 14:27:29...
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.test.grizzly.GrizzlyTestContainerFactory$GrizzlyTestContainer start
INFO: Starting GrizzlyTestContainer...
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.NetworkListener start
INFO: Started listener bound to [localhost:9998]
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.HttpServer start
INFO: [HttpServer] Started.
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.test.grizzly.GrizzlyTestContainerFactory$GrizzlyTestContainer stop
INFO: Stopping GrizzlyTestContainer...
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.NetworkListener shutdownNow
INFO: Stopped listener bound to [localhost:9998]
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.server.ApplicationHandler initialize
INFO: Initiating Jersey application, version Jersey: 2.5 2013-12-18 14:27:29...
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.test.grizzly.GrizzlyTestContainerFactory$GrizzlyTestContainer start
INFO: Starting GrizzlyTestContainer...
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.NetworkListener start
INFO: Started listener bound to [localhost:9998]
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.HttpServer start
INFO: [HttpServer-1] Started.
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.test.grizzly.GrizzlyTestContainerFactory$GrizzlyTestContainer stop
INFO: Stopping GrizzlyTestContainer...
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.NetworkListener shutdownNow
INFO: Stopped listener bound to [localhost:9998]
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.server.ApplicationHandler initialize
INFO: Initiating Jersey application, version Jersey: 2.5 2013-12-18 14:27:29...
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.test.grizzly.GrizzlyTestContainerFactory$GrizzlyTestContainer start
INFO: Starting GrizzlyTestContainer...
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.NetworkListener start
INFO: Started listener bound to [localhost:9998]
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.HttpServer start
INFO: [HttpServer-2] Started.
Jan 19, 2014 8:36:40 PM org.glassfish.jersey.test.grizzly.GrizzlyTestContainerFactory$GrizzlyTestContainer stop
INFO: Stopping GrizzlyTestContainer...
Jan 19, 2014 8:36:40 PM org.glassfish.grizzly.http.server.NetworkListener shutdownNow
INFO: Stopped listener bound to [localhost:9998]
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.628 sec

Results :

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.103s
[INFO] Finished at: Sun Jan 19 20:36:40 CST 2014
[INFO] Final Memory: 17M/439M
[INFO] ------------------------------------------------------------------------
</code></pre> 
  <h3 id="user-content-static assets"><a href="https://github.com/rjenkins/ursus#serving-static-assets" aria-hidden="true" class="anchor" id="user-content-serving-static-assets" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Serving Static Assets</h3> 
  <p>With Ursus you can serve static assets such as HTML or Javascript files. Simply add the staticResourceDirectory and staticResourceContextRoot options to the <code>httpServer</code> section of the <code>exampleapplication.yml</code> file.</p> 
  <div class="highlight highlight-source-yaml">
   <pre><span class="pl-ent">httpServer</span>:
  <span class="pl-ent">host</span>: <span class="pl-s">localhost</span>
  <span class="pl-ent">staticResourceDirectory</span>: <span class="pl-s">assets</span>
  <span class="pl-ent">staticResourceContextRoot</span>: <span class="pl-s">/ursus</span>
<span class="pl-ent">logging</span>:
  <span class="pl-ent">level</span>: <span class="pl-s">INFO</span>
<span class="pl-ent">name</span>: <span class="pl-s">Ray</span></pre>
  </div> 
  <p>If we add an index.html file to the <code>assets</code> directory of our application.</p> 
  <div class="highlight highlight-text-html-basic">
   <pre>&lt;!DOCTYPE html&gt;
&lt;<span class="pl-ent">html</span>&gt;
&lt;<span class="pl-ent">head</span>&gt;&lt;/<span class="pl-ent">head</span>&gt;
&lt;<span class="pl-ent">body</span>&gt;
&lt;<span class="pl-ent">p</span>&gt;Hello from Ursus!&lt;/<span class="pl-ent">p</span>&gt;
&lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre>
  </div> 
  <p>We can access static resources from the browser.</p> 
  <pre><code>$ curl -X GET http://localhost:8080/ursus/index.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;Hello from Ursus!&lt;/p&gt;
&lt;/body&gt;
$
</code></pre> 
  <h3 id="user-content-websocket"><a href="https://github.com/rjenkins/ursus#websocket-endpoints" aria-hidden="true" class="anchor" id="user-content-websocket-endpoints" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>WebSocket EndPoints</h3> 
  <p>In addition to Jersey, Ursus includes <a href="https://tyrus.java.net/" target="_blank">Tyrus</a> the open source JSR 356 - Java API for WebSocket reference implementation for easy development of WebSocket applications. You can create Annotated EndPoints and register them within your Ursus application or create them programatically. If you need to pass dependencies to EndPoints you'll need to do that programmatically and make use of the EndPoint's <a href="http://docs.oracle.com/javaee/7/api/javax/websocket/EndpointConfig.html#getUserProperties" target="_blank">UserProperties</a></p> 
  <p>Let's create a simple programmatic EndPoint for <code>ursus-example-application</code>. We'll pass in our <code>ExampleApplicationConfiguration</code> in the onOpen method. Now we can use our <code>name</code> property to respond to clients.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example.api</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.example.ExampleApplicationConfiguration</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.Logger</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.LoggerFactory</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.websocket.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.io.IOException</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">EchoEndpointResource</span> <span class="pl-k">extends</span> <span class="pl-e">Endpoint</span> {

    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">Logger</span> logger <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">EchoEndpointResource</span><span class="pl-k">.</span>class);
    <span class="pl-k">private</span> <span class="pl-smi">ExampleApplicationConfiguration</span> exampleApplicationConfiguration;

    <span class="pl-k">@OnOpen</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onOpen</span>(<span class="pl-k">final</span> <span class="pl-smi">Session</span> <span class="pl-v">session</span>, <span class="pl-smi">EndpointConfig</span> <span class="pl-v">config</span>) {
        exampleApplicationConfiguration <span class="pl-k">=</span> (<span class="pl-smi">ExampleApplicationConfiguration</span>) config<span class="pl-k">.</span>getUserProperties()<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>exampleApplicationConfiguration<span class="pl-pds">"</span></span>);
        session<span class="pl-k">.</span>addMessageHandler(<span class="pl-k">new</span> <span class="pl-smi">MessageHandler</span>.<span class="pl-k">Whole&lt;<span class="pl-smi">String</span>&gt;</span>() {

            <span class="pl-k">@Override</span>
            <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onMessage</span>(<span class="pl-smi">String</span> <span class="pl-v">message</span>) {
                logger<span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Received message from client: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> message);
                <span class="pl-k">try</span> {
                    session<span class="pl-k">.</span>getBasicRemote()<span class="pl-k">.</span>sendText(<span class="pl-s"><span class="pl-pds">"</span>Hello <span class="pl-pds">"</span></span> <span class="pl-k">+</span> exampleApplicationConfiguration<span class="pl-k">.</span>getName());
                } <span class="pl-k">catch</span> (<span class="pl-smi">IOException</span> e) {
                    e<span class="pl-k">.</span>printStackTrace();  <span class="pl-c"><span class="pl-c">//</span>To change body of catch statement use File | Settings | File Templates.</span>
                }
            }
        });
    }
}</pre>
  </div> 
  <h3 id="user-content-registering endpoints"><a href="https://github.com/rjenkins/ursus#registering-endpoints" aria-hidden="true" class="anchor" id="user-content-registering-endpoints" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Registering EndPoints</h3> 
  <p>Ursus provides some short cuts that allow you to quickly register your endpoints and pass any dependencies to your endpoint. Let's modify our bootstrap method and use the <code>registerEndPoint</code> method to add <code>EchoEndPointResouce</code>. We simply need to pass our endpoint class, the path, and a key for our UserProperties, that key will be "exampleApplicationConfiguration" and the value is the instance of our <code>ExampleApplicationConfiguration</code> class.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ExampleApplication</span> <span class="pl-k">extends</span> <span class="pl-e">UrsusJerseyApplication&lt;<span class="pl-smi">ExampleApplicationConfiguration</span>&gt;</span> {

    <span class="pl-c1">...</span>

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">boostrap</span>(<span class="pl-smi">ExampleApplicationConfiguration</span> <span class="pl-v">exampleApplicationConfiguration</span>) {
        packages(<span class="pl-s"><span class="pl-pds">"</span>com.aceevo.ursus.example.api<span class="pl-pds">"</span></span>);
        registerEndpoint(<span class="pl-smi">EchoEndpointResource</span><span class="pl-k">.</span>class, <span class="pl-s"><span class="pl-pds">"</span>/echo<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>exampleApplicationConfiguration<span class="pl-pds">"</span></span>, exampleApplicationConfiguration);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">run</span>(<span class="pl-smi">HttpServer</span> <span class="pl-v">httpServer</span>) {
        startWithShutdownHook(httpServer);
    }
}</pre>
  </div> 
  <h3 id="user-content-tyrus annotated"><a href="https://github.com/rjenkins/ursus#tyrus-annotated-endpoints" aria-hidden="true" class="anchor" id="user-content-tyrus-annotated-endpoints" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Tyrus Annotated EndPoints</h3> 
  <p>Tyrus also provides support for annotated EndPoints using the <code>@OnOpen</code> <code>@OnClose</code> <code>@OnError</code> <code>@OnMessage</code>. You can't pass arguments into these endpoints as the lifecycle of these resources are controlled by Tyrus (though you can control that by overriding a class, more on that later). Let's create an annotation based <code>EndPoint</code> and register it with our application.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example.api</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.Logger</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.LoggerFactory</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.websocket.OnMessage</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.websocket.Session</span>;
<span class="pl-k">import</span> <span class="pl-smi">javax.websocket.server.ServerEndpoint</span>;

<span class="pl-k">@ServerEndpoint</span>(<span class="pl-c1">value</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>/annotatedEcho<span class="pl-pds">"</span></span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">AnnotatedEndPointResource</span> {

    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOGGER</span> <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">AnnotatedEndPointResource</span><span class="pl-k">.</span>class);

    <span class="pl-k">@OnMessage</span>
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">sayHello</span>(<span class="pl-smi">String</span> <span class="pl-v">message</span>, <span class="pl-smi">Session</span> <span class="pl-v">session</span>) {
        <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Received message from client: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> message);
        <span class="pl-k">return</span> message;
    }
}
</pre>
  </div> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ExampleApplication</span> <span class="pl-k">extends</span> <span class="pl-e">UrsusJerseyApplication&lt;<span class="pl-smi">ExampleApplicationConfiguration</span>&gt;</span> {

   <span class="pl-c1">...</span>

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">boostrap</span>(<span class="pl-smi">ExampleApplicationConfiguration</span> <span class="pl-v">exampleApplicationConfiguration</span>) {
        packages(<span class="pl-s"><span class="pl-pds">"</span>com.aceevo.ursus.example.api<span class="pl-pds">"</span></span>);
        register(<span class="pl-smi">AnnotatedEndPointResource</span><span class="pl-k">.</span>class);
        registerEndpoint(<span class="pl-smi">EchoEndpointResource</span><span class="pl-k">.</span>class, <span class="pl-s"><span class="pl-pds">"</span>/echo<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>exampleApplicationConfiguration<span class="pl-pds">"</span></span>, exampleApplicationConfiguration);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">run</span>(<span class="pl-smi">HttpServer</span> <span class="pl-v">httpServer</span>) {
        startWithShutdownHook(httpServer);
    }
}</pre>
  </div> 
  <h3 id="user-content-websocket client"><a href="https://github.com/rjenkins/ursus#creating-websocket-clients" aria-hidden="true" class="anchor" id="user-content-creating-websocket-clients" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Creating WebSocket Clients</h3> 
  <p>The <code>ursus-example-websocket-client</code> project provides an example of how to create a Java based WebSocket client. Our client accepts a command line argument, if the argument <code>annotated</code> is passed we'll call the annotation based EndPoint, otherwise we'll call the programmatically created <code>EchoEndpointResource</code>.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example.websocketclient</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.tyrus.client.ClientManager</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.Logger</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.LoggerFactory</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.bridge.SLF4JBridgeHandler</span>;

<span class="pl-k">import</span> <span class="pl-smi">javax.websocket.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.io.IOException</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.net.URI</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.CountDownLatch</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.TimeUnit</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">SimpleWebSocketClient</span> {
    <span class="pl-k">private</span> <span class="pl-smi">CountDownLatch</span> messageLatch;
    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-smi">String</span> <span class="pl-c1">SENT_MESSAGE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello WebSocket<span class="pl-pds">"</span></span>;

    <span class="pl-k">final</span> <span class="pl-smi">Logger</span> logger <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">SimpleWebSocketClient</span><span class="pl-k">.</span>class);

    <span class="pl-k">public</span> <span class="pl-en">SimpleWebSocketClient</span>() {

        <span class="pl-c"><span class="pl-c">//</span> Bridge j.u.l in Grizzly with SLF4J</span>
        <span class="pl-smi">SLF4JBridgeHandler</span><span class="pl-k">.</span>removeHandlersForRootLogger();
        <span class="pl-smi">SLF4JBridgeHandler</span><span class="pl-k">.</span>install();
        logger<span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>starting<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-smi">SimpleWebSocketClient</span> simpleWebSocketClient <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">SimpleWebSocketClient</span>();

        <span class="pl-k">if</span> (args<span class="pl-k">.</span>length <span class="pl-k">&gt;</span> <span class="pl-c1">0</span> <span class="pl-k">&amp;&amp;</span> <span class="pl-s"><span class="pl-pds">"</span>annotated<span class="pl-pds">"</span></span><span class="pl-k">.</span>equals(args[<span class="pl-c1">0</span>]))
            simpleWebSocketClient<span class="pl-k">.</span>run(<span class="pl-s"><span class="pl-pds">"</span>ws://localhost:8080/annotatedEcho<span class="pl-pds">"</span></span>);
        <span class="pl-k">else</span>
            simpleWebSocketClient<span class="pl-k">.</span>run(<span class="pl-s"><span class="pl-pds">"</span>ws://localhost:8080/echo<span class="pl-pds">"</span></span>);
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>(<span class="pl-smi">String</span> <span class="pl-v">uri</span>) {
        <span class="pl-k">try</span> {
            messageLatch <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">CountDownLatch</span>(<span class="pl-c1">1</span>);

            <span class="pl-k">final</span> <span class="pl-smi">ClientEndpointConfig</span> cec <span class="pl-k">=</span> <span class="pl-smi">ClientEndpointConfig</span><span class="pl-k">.</span><span class="pl-smi">Builder</span><span class="pl-k">.</span>create()<span class="pl-k">.</span>build();
            <span class="pl-smi">ClientManager</span> client <span class="pl-k">=</span> <span class="pl-smi">ClientManager</span><span class="pl-k">.</span>createClient();
            client<span class="pl-k">.</span>connectToServer(<span class="pl-k">new</span> <span class="pl-smi">Endpoint</span>() {

                <span class="pl-k">@Override</span>
                <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onOpen</span>(<span class="pl-k">final</span> <span class="pl-smi">Session</span> <span class="pl-v">session</span>, <span class="pl-smi">EndpointConfig</span> <span class="pl-v">config</span>) {
                    <span class="pl-k">try</span> {
                        session<span class="pl-k">.</span>addMessageHandler(<span class="pl-k">new</span> <span class="pl-smi">MessageHandler</span>.<span class="pl-k">Whole&lt;<span class="pl-smi">String</span>&gt;</span>() {
                            <span class="pl-k">@Override</span>
                            <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onMessage</span>(<span class="pl-smi">String</span> <span class="pl-v">message</span>) {
                                logger<span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>Server replied with : <span class="pl-pds">"</span></span> <span class="pl-k">+</span> message);
                                <span class="pl-k">try</span> {
                                    session<span class="pl-k">.</span>close();
                                    messageLatch<span class="pl-k">.</span>countDown();
                                } <span class="pl-k">catch</span> (<span class="pl-smi">IOException</span> ex) {
                                    logger<span class="pl-k">.</span>debug(ex<span class="pl-k">.</span>getMessage(), ex);
                                }

                            }
                        });
                        session<span class="pl-k">.</span>getBasicRemote()<span class="pl-k">.</span>sendText(<span class="pl-c1">SENT_MESSAGE</span>);
                    } <span class="pl-k">catch</span> (<span class="pl-smi">IOException</span> e) {
                        e<span class="pl-k">.</span>printStackTrace();
                    }
                }
            }, cec, <span class="pl-k">new</span> <span class="pl-smi">URI</span>(uri));
            messageLatch<span class="pl-k">.</span>await(<span class="pl-c1">100</span>, <span class="pl-smi">TimeUnit</span><span class="pl-c1"><span class="pl-k">.</span>SECONDS</span>);
        } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {
            e<span class="pl-k">.</span>printStackTrace();
        }
    }
}</pre>
  </div> 
  <h3 id="user-content-testing websocket client"><a href="https://github.com/rjenkins/ursus#testing-websocket-clients" aria-hidden="true" class="anchor" id="user-content-testing-websocket-clients" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Testing WebSocket Clients</h3> 
  <p>Now that we've created a WebSocket Endpoint we can test our WebSocket Client. Let's start ExampleApplication with the following command <code>mvn -q compile -P run-ursus-example-application</code></p> 
  <pre><code>$ mvn -q compile -P run-ursus-example-application
21:01:39.778 [main] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 5.0.1.Final
21:01:40.711 [main] INFO  o.g.jersey.server.ApplicationHandler - Initiating Jersey application, version Jersey: 2.5 2013-12-18 14:27:29...
21:01:40.815 [main] WARN  o.g.jersey.internal.inject.Providers - A provider com.aceevo.ursus.example.api.AnnotatedEndPointResource registered in SERVER runtime does not implement any provider interfaces applicable in the SERVER runtime. Due to constraint configuration problems the provider com.aceevo.ursus.example.api.AnnotatedEndPointResource will be ignored.
21:01:41.110 [main] INFO  c.a.u.core.UrsusJerseyApplication - Starting all managed services...
21:01:41.162 [main] INFO  o.g.g.http.server.NetworkListener - Started listener bound to [localhost:8080]
21:01:41.166 [main] INFO  o.g.grizzly.http.server.HttpServer - [HttpServer] Started.
21:01:41.174 [main] INFO  c.a.u.core.UrsusJerseyApplication - Starting ExampleApplication
 __  __   ______    ______   __  __   ______
/_/\/_/\ /_____/\  /_____/\ /_/\/_/\ /_____/\
\:\ \:\ \\:::_ \ \ \::::_\/_\:\ \:\ \\::::_\/_
 \:\ \:\ \\:(_) ) )_\:\/___/\\:\ \:\ \\:\/___/\
  \:\ \:\ \\: __ `\ \\_::._\:\\:\ \:\ \\_::._\:\
   \:\_\:\ \\ \ `\ \ \ /____\:\\:\_\:\ \ /____\:\
    \_____\/ \_\/ \_\/ \_____\/ \_____\/ \_____\/

21:01:41.174 [main] INFO  c.a.u.core.UrsusJerseyApplication - Press CTRL^C to exit..
</code></pre> 
  <p>Now we can launch our client <code>mvn -q compile -P run-ursus-example-websocket-client</code></p> 
  <pre><code>21:02:39.943 [main] INFO  c.a.u.e.w.SimpleWebSocketClient - starting
21:02:40.228 [Grizzly(2) SelectorRunner] INFO  c.a.u.e.api.EchoEndpointResource - Received message from client: Hello WebSocket
21:02:40.232 [Grizzly(2)] INFO  c.a.u.e.w.SimpleWebSocketClient - Server replied with : Hello Ray
</code></pre> 
  <p>And with the annotated command line argument</p> 
  <pre><code>$ mvn -q compile -P run-ursus-example-websocket-client -Dexec.args="annotated"
01:09:20.213 [main] INFO  c.a.u.e.w.SimpleWebSocketClient - starting
01:09:20.569 [Grizzly(2) SelectorRunner] INFO  c.a.u.e.a.AnnotatedEndPointResource - Received message from client: Hello WebSocket
01:09:20.573 [Grizzly(2)] INFO  c.a.u.e.w.SimpleWebSocketClient - Server replied with : Hello WebSocket
$
</code></pre> 
  <p>We can see the server side <code>EchoEndpointResource</code> received the message <code>Hello WebSocket</code> from our WebSocket Client and replied with the message <code>Hello Ray</code> which was received by <code>SimpleWebSocketClient</code>.</p> 
  <h1 id="user-content-niotransport quick start"><a href="https://github.com/rjenkins/ursus#niotransport-applications-quick-start" aria-hidden="true" class="anchor" id="user-content-niotransport-applications-quick-start" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>NIOTransport Applications Quick Start</h1> 
  <p>In addition to Jersey based Web Services Ursus allows you to rapidly create NIO based applications on the JVM, after all <a href="https://grizzly.java.net/" target="_blank">Grizzlys</a> goal is to help developers to build scalable and robust servers using NIO as well as offering extended framework components: like HTTP and HTTPS.</p> 
  <p>Creating NIOTransport applications in Ursus is easy and uses the same configuration and deployment semantics as Ursus Jersey based applications. Let's take a look at the <code>ursus-example-nio-application</code> and the <code>NIOExampleApplication</code> to get started on our first NIOTransport based service.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.aceevo.ursus.core.UrsusTCPNIOApplication</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.filterchain.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.nio.transport.TCPNIOTransport</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.utils.StringFilter</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.Logger</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.LoggerFactory</span>;

<span class="pl-k">import</span> <span class="pl-smi">java.nio.charset.Charset</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">NIOExampleApplication</span> <span class="pl-k">extends</span> <span class="pl-e">UrsusTCPNIOApplication&lt;<span class="pl-smi">NIOExampleConfiguration</span>&gt;</span> {

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-k">new</span> <span class="pl-smi">NIOExampleApplication</span>(args);
    }

    <span class="pl-k">protected</span> <span class="pl-en">NIOExampleApplication</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-c1">super</span>(args);
    }


    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-smi">FilterChain</span> <span class="pl-en">boostrap</span>(<span class="pl-smi">NIOExampleConfiguration</span> <span class="pl-v">nioExampleConfiguration</span>, <span class="pl-smi">FilterChainBuilder</span> <span class="pl-v">filterChainBuilder</span>) {
        <span class="pl-k">return</span> filterChainBuilder<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">TransportFilter</span>())
                .add(<span class="pl-k">new</span> <span class="pl-smi">StringFilter</span>(<span class="pl-smi">Charset</span><span class="pl-k">.</span>forName(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>)))
                .add(<span class="pl-k">new</span> <span class="pl-smi">HelloFilter</span>())<span class="pl-k">.</span>build();
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">run</span>(<span class="pl-smi">TCPNIOTransport</span> <span class="pl-v">transport</span>) {
        startWithShutdownHook(transport);
    }

    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">HelloFilter</span> <span class="pl-k">extends</span> <span class="pl-e">BaseFilter</span> {

        <span class="pl-k">private</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOGGER</span> <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">HelloFilter</span><span class="pl-k">.</span>class);

        <span class="pl-k">public</span> <span class="pl-smi">NextAction</span> <span class="pl-en">handleRead</span>(<span class="pl-k">final</span> <span class="pl-smi">FilterChainContext</span> <span class="pl-v">context</span>) {

            <span class="pl-k">try</span> {
                <span class="pl-smi">String</span> message <span class="pl-k">=</span> context<span class="pl-k">.</span>getMessage();
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>received message <span class="pl-pds">"</span></span> <span class="pl-k">+</span> message);

                <span class="pl-c"><span class="pl-c">//</span> Echo back to client</span>
                context<span class="pl-k">.</span>write(message);
            } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> ex) {
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>debug(<span class="pl-s"><span class="pl-pds">"</span>exception handle read<span class="pl-pds">"</span></span>, ex);
            }

            <span class="pl-k">return</span> context<span class="pl-k">.</span>getStopAction();
        }
    }
}</pre>
  </div> 
  <p>Just like our ExampleApplication <code>NIOExampleApplication</code> extends a base application class. When creating an <code>UrsusNIOApplication</code> you have two choices for which base class you'd like to extend. <code>UrsusTCPNIOApplication</code> or <code>UrsusUDPNIOApplication</code> and like UrsusJeryseyApplication we parameterize our application with a type that extends a <code>Configuration</code> class. For UrsusNIOApplications our base configuration class is <code>UrsusNIOApplicationConfiguration</code>.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.config</span>;

<span class="pl-k">import</span> <span class="pl-smi">com.fasterxml.jackson.annotation.JsonProperty</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">UrsusNIOApplicationConfiguration</span> <span class="pl-k">extends</span> <span class="pl-e">UrsusConfiguration</span> {

    <span class="pl-k">@JsonProperty</span>(<span class="pl-c1">required</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>)
    <span class="pl-k">private</span> <span class="pl-smi">Server</span> server;

    <span class="pl-k">public</span> <span class="pl-smi">Server</span> <span class="pl-en">getServer</span>() {
        <span class="pl-k">return</span> server;
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setServer</span>(<span class="pl-smi">Server</span> <span class="pl-v">server</span>) {
        <span class="pl-c1">this</span><span class="pl-k">.</span>server <span class="pl-k">=</span> server;
    }

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">Server</span> {

        <span class="pl-k">@JsonProperty</span>(<span class="pl-c1">required</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>)
        <span class="pl-k">private</span> <span class="pl-smi">String</span> host;

        <span class="pl-k">@JsonProperty</span>(<span class="pl-c1">required</span> <span class="pl-k">=</span> <span class="pl-c1">false</span>)
        <span class="pl-k">private</span> <span class="pl-k">int</span> port <span class="pl-k">=</span> <span class="pl-c1">8080</span>;

        <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getHost</span>() {
            <span class="pl-k">return</span> host;
        }

        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setHost</span>(<span class="pl-smi">String</span> <span class="pl-v">host</span>) {
            <span class="pl-c1">this</span><span class="pl-k">.</span>host <span class="pl-k">=</span> host;
        }

        <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">getPort</span>() {
            <span class="pl-k">return</span> port;
        }

        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setPort</span>(<span class="pl-k">int</span> <span class="pl-v">port</span>) {
            <span class="pl-c1">this</span><span class="pl-k">.</span>port <span class="pl-k">=</span> port;
        }
    }
}</pre>
  </div> 
  <h3 id="user-content-nio bootstrap and run"><a href="https://github.com/rjenkins/ursus#niotransport-bootstrap-and-run" aria-hidden="true" class="anchor" id="user-content-niotransport-bootstrap-and-run" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>NIOTransport Bootstrap and Run</h3> 
  <p>UrsusNIOApplications follow the same semantics as <code>UrsusJerseyApplications</code> we create a constructor and call <code>super(args)</code> and creates a <code>public static void main</code> method which instantiates our <code>UrsusNIOApplication</code> and passes our command line arguments. But the bootstrap and run methods differ in the arguments they take. Let's inspect these more closely.</p> 
  <div class="highlight highlight-source-java">
   <pre>    <span class="pl-k">protected</span> <span class="pl-smi">FilterChain</span> boostrap(<span class="pl-smi">NIOExampleConfiguration</span> nioExampleConfiguration, <span class="pl-smi">FilterChainBuilder</span> filterChainBuilder) {
        <span class="pl-k">return</span> filterChainBuilder<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">TransportFilter</span>())
                .add(<span class="pl-k">new</span> <span class="pl-smi">StringFilter</span>(<span class="pl-smi">Charset</span><span class="pl-k">.</span>forName(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>)))
                .add(<span class="pl-k">new</span> <span class="pl-smi">HelloFilter</span>())<span class="pl-k">.</span>build();
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">protected</span> <span class="pl-k">void</span> run(<span class="pl-smi">TCPNIOTransport</span> transport) {
        startWithShutdownHook(transport);
    }</pre>
  </div> 
  <p>The bootstrap method takes an instance of <code>NIOExampleConfiguration</code> and a <code>FilterChainBuilder</code> for arguments. In addition the bootstrap method returns an instance of <code>FilterChain</code>. The bootstrap method creates a new FilterChain with a single <code>StringFilter</code> followed by our custom <code>HelloFilter</code>.</p> 
  <p>The run method takes a <code>TCPNIOTransport</code> as an argument and like our <code>UrsusJerseyApplication</code> we'll call <code>startWithShutdownHook</code> if we do not have any more programmatic changes to make to our <code>TCPNIOTransport</code>.</p> 
  <h3 id="user-content-a basic filter"><a href="https://github.com/rjenkins/ursus#implementing-a-basicfilter" aria-hidden="true" class="anchor" id="user-content-implementing-a-basicfilter" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Implementing a BasicFilter</h3> 
  <p><a href="https://grizzly.java.net/" target="_blank">Grizzly</a> provides several <a href="https://grizzly.java.net/quickstart.html" target="_blank">examples</a> of how to use FilterChains and <a href="https://grizzly.java.net/docs/2.3/apidocs/org/glassfish/grizzly/filterchain/Filter.html" target="_blank">Filters</a> to build NIO applications (more on that later). The <code>Filter</code> interface is as follows</p> 
  <div class="highlight highlight-source-java">
   <pre>    <span class="pl-k">void</span>  exceptionOccurred(<span class="pl-smi">FilterChainContext</span> ctx, <span class="pl-smi">Throwable</span> error)
    <span class="pl-smi">NextAction</span>	handleAccept(<span class="pl-smi">FilterChainContext</span> ctx)
    <span class="pl-smi">NextAction</span>	handleClose(<span class="pl-smi">FilterChainContext</span> ctx)
    <span class="pl-smi">NextAction</span>	handleConnect(<span class="pl-smi">FilterChainContext</span> ctx)
    <span class="pl-smi">NextAction</span>	handleEvent(<span class="pl-smi">FilterChainContext</span> ctx, <span class="pl-smi">FilterChainEvent</span> event)
    <span class="pl-smi">NextAction</span>	handleRead(<span class="pl-smi">FilterChainContext</span> ctx)
    <span class="pl-smi">NextAction</span>	handleWrite(<span class="pl-smi">FilterChainContext</span> ctx)
    <span class="pl-k">void</span>  onAdded(<span class="pl-smi">FilterChain</span> filterChain)
    <span class="pl-k">void</span>  onFilterChainChanged(<span class="pl-smi">FilterChain</span> filterChain)
    <span class="pl-k">void</span>  onRemoved(<span class="pl-smi">FilterChain</span> filterChain)</pre>
  </div> 
  <p>For our simple application <code>HelloFilter</code> will extend <code>BasicFilter</code> and override the <code>handleRead</code> method. We will use the <code>FilterChainContext</code> to retrieve the message sent from the client and write that message back to the <code>FilterChainContext</code> while returning a <code>NextAction</code>.</p> 
  <div class="highlight highlight-source-java">
   <pre>    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">HelloFilter</span> <span class="pl-k">extends</span> <span class="pl-e">BaseFilter</span> {

        <span class="pl-k">private</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOGGER</span> <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">HelloFilter</span><span class="pl-k">.</span>class);

        <span class="pl-k">public</span> <span class="pl-smi">NextAction</span> <span class="pl-en">handleRead</span>(<span class="pl-k">final</span> <span class="pl-smi">FilterChainContext</span> <span class="pl-v">context</span>) {

            <span class="pl-k">try</span> {
                <span class="pl-smi">String</span> message <span class="pl-k">=</span> context<span class="pl-k">.</span>getMessage();
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>received message <span class="pl-pds">"</span></span> <span class="pl-k">+</span> message);

                <span class="pl-c"><span class="pl-c">//</span> Echo back to client</span>
                context<span class="pl-k">.</span>write(message);
            } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> ex) {
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>debug(<span class="pl-s"><span class="pl-pds">"</span>exception handle read<span class="pl-pds">"</span></span>, ex);
            }

            <span class="pl-k">return</span> context<span class="pl-k">.</span>getStopAction();
        }
    }</pre>
  </div> 
  <h3 id="user-content-nio clients"><a href="https://github.com/rjenkins/ursus#implementing-ursus-nio-clients" aria-hidden="true" class="anchor" id="user-content-implementing-ursus-nio-clients" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Implementing Ursus NIO Clients</h3> 
  <p>Implementing a Grizzly NIO client is very similar to implementing a server. We will need to build a <a href="https://grizzly.java.net/docs/2.3/apidocs/org/glassfish/grizzly/filterchain/FilterChain.html" target="_blank">FilterChain</a> and create a <a href="https://grizzly.java.net/docs/2.3/apidocs/org/glassfish/grizzly/nio/transport/jmx/TCPNIOTransport.html" target="_blank">TCPNIOTransport</a> to use our <code>FilterChain</code>. Let's take a look at the ursus-example-nio-client project and the <code>NIOExampleClient</code> class.</p> 
  <div class="highlight highlight-source-java">
   <pre><span class="pl-k">package</span> <span class="pl-smi">com.aceevo.ursus.example</span>;

<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.Connection</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.filterchain.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.nio.transport.TCPNIOTransport</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.nio.transport.TCPNIOTransportBuilder</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.glassfish.grizzly.utils.StringFilter</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.Logger</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.slf4j.LoggerFactory</span>;

<span class="pl-k">import</span> <span class="pl-smi">java.io.IOException</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.nio.charset.Charset</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.CountDownLatch</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.util.concurrent.ExecutionException</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">NIOExampleClient</span> {

    <span class="pl-k">private</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOGGER</span> <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">NIOExampleClient</span><span class="pl-k">.</span>class);
    <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">CountDownLatch</span> countDownLatch <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">CountDownLatch</span>(<span class="pl-c1">1</span>);

    <span class="pl-k">public</span> <span class="pl-en">NIOExampleClient</span>() {
        <span class="pl-smi">Thread</span> clientRunnerThread <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Thread</span>(<span class="pl-k">new</span> <span class="pl-smi">ClientRunner</span>());
        clientRunnerThread<span class="pl-k">.</span>start();
    }

    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-k">new</span> <span class="pl-smi">NIOExampleClient</span>();
    }

    <span class="pl-k">private</span> <span class="pl-k">class</span> <span class="pl-en">ClientRunner</span> <span class="pl-k">implements</span> <span class="pl-e">Runnable</span> {

        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>() {
            <span class="pl-smi">Connection</span> connection <span class="pl-k">=</span> <span class="pl-c1">null</span>;
            <span class="pl-k">try</span> {

                <span class="pl-k">final</span> <span class="pl-smi">FilterChainBuilder</span> clientFilterBuilder <span class="pl-k">=</span> <span class="pl-smi">FilterChainBuilder</span><span class="pl-k">.</span>stateless()
                        .add(<span class="pl-k">new</span> <span class="pl-smi">TransportFilter</span>())
                        .add(<span class="pl-k">new</span> <span class="pl-smi">StringFilter</span>(<span class="pl-smi">Charset</span><span class="pl-k">.</span>forName(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>)))
                        .add(<span class="pl-k">new</span> <span class="pl-smi">HelloClientFilter</span>(countDownLatch));


                <span class="pl-k">final</span> <span class="pl-smi">TCPNIOTransport</span> transport <span class="pl-k">=</span> <span class="pl-smi">TCPNIOTransportBuilder</span><span class="pl-k">.</span>newInstance()
                        .setProcessor(clientFilterBuilder<span class="pl-k">.</span>build())
                        .build();

                <span class="pl-k">try</span> {
                    transport<span class="pl-k">.</span>start();
                    connection <span class="pl-k">=</span> transport<span class="pl-k">.</span>connect(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">20389</span>)<span class="pl-k">.</span>get();
                    connection<span class="pl-k">.</span>write(<span class="pl-s"><span class="pl-pds">"</span>Hello Ursus<span class="pl-pds">"</span></span>);
                } <span class="pl-k">catch</span> (<span class="pl-smi">IOException</span> e) {
                    e<span class="pl-k">.</span>printStackTrace();  <span class="pl-c"><span class="pl-c">//</span>To change body of catch statement use File | Settings | File Templates.</span>
                }

                countDownLatch<span class="pl-k">.</span>await();
                <span class="pl-k">if</span> (connection <span class="pl-k">!=</span> <span class="pl-c1">null</span>)
                    connection<span class="pl-k">.</span>close();

                <span class="pl-k">try</span> {
                    transport<span class="pl-k">.</span>stop();
                } <span class="pl-k">catch</span> (<span class="pl-smi">IOException</span> e) {
                    <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>debug(<span class="pl-s"><span class="pl-pds">"</span>can't close connect<span class="pl-pds">"</span></span>, e);
                }

            } <span class="pl-k">catch</span> (<span class="pl-smi">InterruptedException</span> e) {
                e<span class="pl-k">.</span>printStackTrace();  <span class="pl-c"><span class="pl-c">//</span>To change body of catch statement use File | Settings | File Templates.</span>
            } <span class="pl-k">catch</span> (<span class="pl-smi">ExecutionException</span> e) {
                e<span class="pl-k">.</span>printStackTrace();  <span class="pl-c"><span class="pl-c">//</span>To change body of catch statement use File | Settings | File Templates.</span>
            }
        }
    }

    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">HelloClientFilter</span> <span class="pl-k">extends</span> <span class="pl-e">BaseFilter</span> {

        <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">CountDownLatch</span> countDownLatch;
        <span class="pl-k">private</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOGGER</span> <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">HelloClientFilter</span><span class="pl-k">.</span>class);

        <span class="pl-k">public</span> <span class="pl-en">HelloClientFilter</span>(<span class="pl-smi">CountDownLatch</span> <span class="pl-v">countDownLatch</span>) {
            <span class="pl-c1">this</span><span class="pl-k">.</span>countDownLatch <span class="pl-k">=</span> countDownLatch;
        }

        <span class="pl-k">public</span> <span class="pl-smi">NextAction</span> <span class="pl-en">handleRead</span>(<span class="pl-k">final</span> <span class="pl-smi">FilterChainContext</span> <span class="pl-v">context</span>) {
            <span class="pl-k">try</span> {
                <span class="pl-smi">String</span> message <span class="pl-k">=</span> context<span class="pl-k">.</span>getMessage();
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>received message from server: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> message);
                countDownLatch<span class="pl-k">.</span>countDown();
            } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> ex) {
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>debug(<span class="pl-s"><span class="pl-pds">"</span>exception handle read<span class="pl-pds">"</span></span>, ex);
            }

            <span class="pl-k">return</span> context<span class="pl-k">.</span>getStopAction();
        }

    }
}</pre>
  </div> 
  <h3 id="user-content-client filters"><a href="https://github.com/rjenkins/ursus#writing-clientfilter" aria-hidden="true" class="anchor" id="user-content-writing-clientfilter" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Writing ClientFilter</h3> 
  <p>This is a basic echo application so our <code>HelloClientFilter</code> essentially mirrors the <code>HelloFilter</code>. It's job is to receive responses from the server <a href="https://grizzly.java.net/docs/2.3/apidocs/org/glassfish/grizzly/nio/NIOTransport.html" target="_blank">NIOTransport</a> filter and log the response. Our client initiates the conversation in the <code>ClientRunner</code> class by writing to our connection.</p> 
  <div class="highlight highlight-source-java">
   <pre>    <span class="pl-k">try</span> {
        transport<span class="pl-k">.</span>start();
        connection <span class="pl-k">=</span> transport<span class="pl-k">.</span>connect(<span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c1">20389</span>)<span class="pl-k">.</span>get();
        connection<span class="pl-k">.</span>write(<span class="pl-s"><span class="pl-pds">"</span>Hello Ursus<span class="pl-pds">"</span></span>);
    } <span class="pl-k">catch</span> (<span class="pl-smi">IOException</span> e) {
        e<span class="pl-k">.</span>printStackTrace();  <span class="pl-c"><span class="pl-c">//</span>To change body of catch statement use File | Settings | File Templates.</span>
    }

    <span class="pl-c1">...</span>

    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">class</span> <span class="pl-en">HelloClientFilter</span> <span class="pl-k">extends</span> <span class="pl-e">BaseFilter</span> {

        <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">CountDownLatch</span> countDownLatch;
        <span class="pl-k">private</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOGGER</span> <span class="pl-k">=</span> <span class="pl-smi">LoggerFactory</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">HelloClientFilter</span><span class="pl-k">.</span>class);

        <span class="pl-k">public</span> <span class="pl-en">HelloClientFilter</span>(<span class="pl-smi">CountDownLatch</span> <span class="pl-v">countDownLatch</span>) {
            <span class="pl-c1">this</span><span class="pl-k">.</span>countDownLatch <span class="pl-k">=</span> countDownLatch;
        }

        <span class="pl-k">public</span> <span class="pl-smi">NextAction</span> <span class="pl-en">handleRead</span>(<span class="pl-k">final</span> <span class="pl-smi">FilterChainContext</span> <span class="pl-v">context</span>) {
            <span class="pl-k">try</span> {
                <span class="pl-smi">String</span> message <span class="pl-k">=</span> context<span class="pl-k">.</span>getMessage();
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>info(<span class="pl-s"><span class="pl-pds">"</span>received message from server: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> message);
                countDownLatch<span class="pl-k">.</span>countDown();
            } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> ex) {
                <span class="pl-c1">LOGGER</span><span class="pl-k">.</span>debug(<span class="pl-s"><span class="pl-pds">"</span>exception handle read<span class="pl-pds">"</span></span>, ex);
            }

            <span class="pl-k">return</span> context<span class="pl-k">.</span>getStopAction();
        }
    }</pre>
  </div> 
  <h3 id="user-content-running nio application"><a href="https://github.com/rjenkins/ursus#running-niotransport-applications" aria-hidden="true" class="anchor" id="user-content-running-niotransport-applications" target="_blank">
    <svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewbox="0 0 16 16" width="16">
     <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </svg></a>Running NIOTransport applications</h3> 
  <p>Let's use the <code>ursus-example-nio-application</code> project to start our server. Once we've started our server we can launch the <code>ursus-example-nio-client</code> and watch it connect to our <a href="https://grizzly.java.net/docs/2.3/apidocs/org/glassfish/grizzly/nio/NIOTransport.html" target="_blank">NIOTransport</a> application, say "Hello Ursus" and verify that the server has responded.</p> 
  <pre><code>$ mvn -q compile -P run-ursus-example-nio-application
23:21:27.332 [main] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 5.0.1.Final
23:21:27.638 [main] INFO  c.a.ursus.core.UrsusNIOApplication - Starting all managed services...
23:21:27.682 [main] INFO  c.a.ursus.core.UrsusNIOApplication - Starting NIOExampleApplication
 __  __   ______    ______   __  __   ______
/_/\/_/\ /_____/\  /_____/\ /_/\/_/\ /_____/\
\:\ \:\ \\:::_ \ \ \::::_\/_\:\ \:\ \\::::_\/_
 \:\ \:\ \\:(_) ) )_\:\/___/\\:\ \:\ \\:\/___/\
  \:\ \:\ \\: __ `\ \\_::._\:\\:\ \:\ \\_::._\:\
   \:\_\:\ \\ \ `\ \ \ /____\:\\:\_\:\ \ /____\:\
    \_____\/ \_\/ \_\/ \_____\/ \_____\/ \_____\/

23:21:27.682 [main] INFO  c.a.ursus.core.UrsusNIOApplication - Press CTRL^C to exit..
^Z
[1]+  Stopped                 mvn -q compile -P run-ursus-example-application
$ bg
[1]+ mvn -q compile -P run-ursus-example-application &amp;
$ mvn -q compile -P run-ursus-example-nio-client
23:21:49.485 [Grizzly-worker(1)] INFO  c.a.u.e.NIOExampleApplication$HelloFilter - received message Hello Ursus
23:21:49.493 [Grizzly-worker(1)] INFO  c.a.u.e.NIOExampleClient$HelloClientFilter - received message from server: Hello Ursus
$

</code></pre> 
 </article>
</div>